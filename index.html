<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timemania - Gerador Manual + Minimalista</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/xlsx/dist/xlsx.full.min.js"></script>
    <link rel="stylesheet" href="./css/styles.css">
    <script src="./js/scripts.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        timemania: '#FFF600',
                        'timemania-green': '#12923D',
                        'timemania-dark': '#B3AD00',
                        'timemania-bg': '#FFFEE6',
                        'timemania-yellow': '#FFF833',
                        'timemania-green-light': '#77EE9F',
                        'timemania-green-dark': '#0B5B26'
                    }
                }
            }
        }
    </script>
    <style>
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        .numero-time {
            width: 45px;
            height: 45px;
            background: linear-gradient(135deg, #FFF600, #FFD700);
            color: #333;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
        }

        .numero-time:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 15px rgba(255, 246, 0, 0.4);
        }

        .numero-time.selecionado {
            background: linear-gradient(135deg, #dc2626, #ef4444);
            box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.3);
            border-color: #dc2626;
            color: white;
        }

        .numero-time.sorteado {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            border: 2px solid #fbbf24;
            position: relative;
            color: white;
        }

        .numero-time.sorteado::after {
            content: "‚öΩ";
            position: absolute;
            top: -8px;
            right: -8px;
            font-size: 12px;
        }

        .numero-time.disabled {
            background: #9ca3af;
            cursor: not-allowed;
            opacity: 0.5;
        }

        .numero-time.par { border: 2px solid #12923D; }
        .numero-time.impar { border: 2px solid #FFF600; }

        .time-coracao {
            width: 80px;
            height: 60px;
            background: linear-gradient(135deg, #12923D, #77EE9F);
            color: white;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 10px;
            cursor: pointer;
            transition: all 0.2s;
            border: 3px solid transparent;
            position: relative;
            text-align: center;
            padding: 2px;
        }

        .time-coracao::before {
            content: "‚öΩ";
            position: absolute;
            top: -5px;
            right: -5px;
            font-size: 14px;
        }

        .time-coracao:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(18, 146, 61, 0.4);
        }

        .time-coracao.selecionado {
            background: linear-gradient(135deg, #dc2626, #ef4444);
            box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.3);
            border-color: #dc2626;
        }

        .time-coracao.sorteado {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            border: 3px solid #fbbf24;
        }

        .time-coracao.disabled {
            background: #9ca3af;
            cursor: not-allowed;
            opacity: 0.5;
        }

        .contador-destaque { animation: bounce 1s ease-in-out; }
        .meta-atingida {
            background: linear-gradient(45deg, #10b981, #34d399) !important;
            color: white;
            animation: pulse 1s infinite;
        }

        .drop-zone {
            min-height: 120px;
            border: 3px dashed #FFF600;
            border-radius: 12px;
            background: linear-gradient(135deg, #FFFEE6, #FFFDCC);
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: #B3AD00;
            font-weight: bold;
            transition: all 0.3s;
        }

        .drop-zone:hover {
            border-color: #B3AD00;
            background: linear-gradient(135deg, #FFFDCC, #FFFCB3);
            transform: scale(1.02);
        }

        .drop-zone.drag-over {
            border-color: #dc2626;
            background: linear-gradient(135deg, #fee2e2, #fecaca);
            border-style: solid;
            animation: pulse 0.5s infinite;
        }

        .drop-zone-time {
            min-height: 100px;
            border: 3px dashed #12923D;
            border-radius: 12px;
            background: linear-gradient(135deg, #e8fcef, #d2f9df);
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: #12923D;
            font-weight: bold;
            transition: all 0.3s;
        }

        .drop-zone-time:hover {
            border-color: #0B5B26;
            background: linear-gradient(135deg, #d2f9df, #bbf7cf);
            transform: scale(1.02);
        }

        .numero-drop {
            width: 35px;
            height: 35px;
            background: linear-gradient(135deg, #FFF600, #FFD700);
            color: #333;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 12px;
            margin: 2px;
            position: relative;
            cursor: move;
            transition: all 0.2s;
        }

        .numero-drop:hover {
            transform: scale(1.1);
            z-index: 10;
        }

        .numero-drop .remove-btn {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #dc2626;
            color: white;
            border-radius: 50%;
            width: 16px;
            height: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .numero-drop:hover .remove-btn { opacity: 1; }

        .time-drop {
            width: 60px;
            height: 40px;
            background: linear-gradient(135deg, #12923D, #77EE9F);
            color: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 10px;
            margin: 2px;
            position: relative;
            cursor: move;
            transition: all 0.2s;
            text-align: center;
        }

        .time-drop::before {
            content: "‚öΩ";
            position: absolute;
            top: -3px;
            right: -3px;
            font-size: 10px;
        }

        .time-drop:hover {
            transform: scale(1.1);
            z-index: 10;
        }

        .time-drop .remove-btn {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #dc2626;
            color: white;
            border-radius: 50%;
            width: 16px;
            height: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .time-drop:hover .remove-btn { opacity: 1; }

        .jogo-card {
            background: linear-gradient(to right, #FFFEE6, #FFFDCC);
            border: 2px solid #FFF600;
            border-radius: 12px;
            padding: 16px;
            margin: 8px 0;
        }

        .numero-jogo {
            width: 28px;
            height: 28px;
            background: linear-gradient(135deg, #FFF600, #FFD700);
            color: #333;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 11px;
        }

        .time-jogo {
            width: 50px;
            height: 30px;
            background: linear-gradient(135deg, #12923D, #77EE9F);
            color: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 9px;
            position: relative;
            text-align: center;
        }

        .time-jogo::before {
            content: "‚öΩ";
            position: absolute;
            top: -3px;
            right: -3px;
            font-size: 8px;
        }

        .numero-minimalista {
            width: 28px;
            height: 28px;
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 11px;
            margin: 2px;
        }

        .time-minimalista {
            width: 45px;
            height: 25px;
            background: linear-gradient(135deg, #f59e0b, #f97316);
            color: white;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 8px;
            margin: 2px;
            position: relative;
            text-align: center;
        }

        .time-minimalista::before {
            content: "‚öΩ";
            position: absolute;
            top: -3px;
            right: -3px;
            font-size: 8px;
        }

        .jogo-minimalista-card {
            background: linear-gradient(to right, #faf5ff, #f3e8ff);
            border: 2px solid #8b5cf6;
            border-radius: 12px;
            padding: 12px;
            margin: 8px 0;
        }

        .input-manual {
            min-height: 80px;
            border: 3px dashed #8b5cf6;
            border-radius: 12px;
            background: linear-gradient(135deg, #faf5ff, #f3e8ff);
            padding: 16px;
            color: #8b5cf6;
            font-weight: bold;
        }

        .input-manual:focus {
            outline: none;
            border-color: #7c3aed;
            background: linear-gradient(135deg, #f3e8ff, #e9d5ff);
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
        }

			.regra-item {
			background: linear-gradient(135deg, #f0fdf4, #dcfce7);
			border: 2px solid #10b981;
			border-radius: 8px;
			padding: 8px;      /* Reduzido de 12px para 8px */
			margin: 6px 0;     /* Reduzido de 8px para 6px */
			transition: all 0.3s;
		}

        .regra-item:hover {
            border-color: #059669;
            transform: scale(1.01);
        }

        .regra-item.ativa {
            background: linear-gradient(135deg, #dcfce7, #bbf7d0);
            border-color: #059669;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.2);
        }

        .numero-resultado {
            width: 35px;
            height: 35px;
            background: linear-gradient(135deg, #FFF600, #FFD700);
            color: #333;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 12px;
            margin: 0 2px;
        }

        .time-resultado {
            width: 60px;
            height: 35px;
            background: linear-gradient(135deg, #12923D, #77EE9F);
            color: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 10px;
            margin: 0 2px;
            position: relative;
            text-align: center;
        }

        .time-resultado::before {
            content: "‚öΩ";
            position: absolute;
            top: -5px;
            right: -5px;
            font-size: 12px;
        }

        .config-principal {
            background: linear-gradient(135deg, #FFFCB3, #FFF833);
            border: 3px solid #4D4A00;
            border-radius: 16px;
            margin-bottom: 24px;
        }

        .config-header {
            background: linear-gradient(135deg, #FFF600, #B3AD00);
            color: #333;
            padding: 12px 20px;
            border-radius: 12px 12px 0 0;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: bold;
        }

        .config-content {
            background: linear-gradient(135deg, #FFFEE6, #FFFDCC);
            padding: 20px;
            border-radius: 0 0 12px 12px;
        }

        .valor-input {
            background: white;
            border: 2px solid #4D4A00;
            border-radius: 8px;
            padding: 8px 12px;
            font-weight: bold;
            font-size: 16px;
            color: #B3AD00;
            width: 120px;
            text-align: center;
        }

        .valor-input:focus {
            outline: none;
            border-color: #FFF600;
            box-shadow: 0 0 0 3px rgba(255, 246, 0, 0.1);
        }

        .btn-atualizar {
            background: linear-gradient(135deg, #dc2626, #ef4444);
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: bold;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-atualizar:hover {
            background: linear-gradient(135deg, #b91c1c, #dc2626);
            transform: scale(1.05);
        }

        .status-badge {
            background: linear-gradient(135deg, #10b981, #34d399);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }

        .grid-timemania {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 6px;
            max-width: 500px;
            margin: 0 auto;
        }

        .grid-times {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            max-height: 300px;
            overflow-y: auto;
            padding: 10px;
            border: 2px solid #12923D;
            border-radius: 12px;
            background: linear-gradient(135deg, #e8fcef, #d2f9df);
        }

        @media (max-width: 768px) {
            .numero-time { width: 38px; height: 38px; font-size: 12px; }
            .time-coracao { width: 70px; height: 50px; font-size: 9px; }
            .numero-drop { width: 28px; height: 28px; font-size: 10px; }
            .time-drop { width: 50px; height: 30px; font-size: 8px; }
            .numero-resultado { width: 30px; height: 30px; font-size: 10px; }
            .time-resultado { width: 50px; height: 30px; font-size: 8px; }
            .grid-timemania { grid-template-columns: repeat(6, 1fr); gap: 4px; max-width: 350px; }
            .grid-times { grid-template-columns: repeat(3, 1fr); gap: 6px; }
        }
    </style>
</head>
<body class="bg-timemania-bg min-h-screen">
    <div class="container mx-auto px-4 py-6">
        <!-- Header -->
        <div class="text-center mb-6">
            <img src="https://i.postimg.cc/W4g9ShFc/timemania.png" alt="Timemania Logo" class="logo"><br />
            <p class="text-gray-600">Gerador Completo: Manual + Minimalista com 19 Regras Avan√ßadas</p>
            
            <!-- Bot√µes de Navega√ß√£o -->
            <div class="flex flex-wrap justify-center gap-2 mt-4">
                <button class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm">
                    üîç An√°lise N√∫meros + Time
                </button>
                <button class="bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg text-sm">
                    üîÑ Resultados Alterados
                </button>
                <button class="bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-lg text-sm">
                    üìä Estrat√©gia Minimalista
                </button>
            </div>
        </div>

        <!-- ‚öôÔ∏è CONFIGURA√á√ÉO PRINCIPAL - VALORES DA TIMEMANIA -->
        <div class="config-principal">
            <div class="config-header">
                <span>‚öôÔ∏è</span>
                <span>CONFIGURA√á√ÉO PRINCIPAL</span>
            </div>
            
            <div class="bg-timemania text-gray-800 text-center py-2 font-bold">
                ‚öôÔ∏è CONFIGURA√á√ÉO PRINCIPAL - VALORES DA TIMEMANIA
            </div>
            
            <div class="config-content">
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    
                    <!-- Valor da Aposta Simples -->
                    <div class="bg-white rounded-lg p-4 border-2 border-amber-400">
                        <div class="flex items-center gap-2 mb-3">
                            <span class="text-2xl">üí∞</span>
                            <span class="font-bold text-amber-800">Valor da Aposta Simples (10 n√∫meros + time):</span>
                        </div>
                        <div class="flex items-center gap-3 mb-3">
                            <span class="text-xl font-bold text-amber-900">R$</span>
                            <input 
                                type="number" 
                                id="valorApostaSimples" 
                                class="valor-input" 
                                value="3.50" 
                                step="0.01" 
                                min="0.01"
                            >
                            <button id="atualizarValor" class="btn-atualizar">
                                üîÑ Atualizar
                            </button>
                        </div>
                        <div class="text-sm text-amber-700">
                            <strong>Padr√£o oficial:</strong> R$ 3,50 (CEF)
                        </div>
                    </div>

                    <!-- Multiplicadores Autom√°ticos -->
                    <div class="bg-white rounded-lg p-4 border-2 border-blue-400">
                        <div class="flex items-center gap-2 mb-3">
                            <span class="text-2xl">üìä</span>
                            <span class="font-bold text-blue-800">Multiplicadores Autom√°ticos:</span>
                        </div>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span class="font-medium">11 n√∫meros:</span>
                                <span id="valor11numeros" class="text-blue-700 font-bold">11x = R$ 38,50</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="font-medium">12 n√∫meros:</span>
                                <span id="valor12numeros" class="text-blue-700 font-bold">66x = R$ 231,00</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="font-medium">15 n√∫meros:</span>
                                <span id="valor15numeros" class="text-blue-700 font-bold">5005x = R$ 17.517,50</span>
                            </div>
                        </div>
                    </div>

                    <!-- Status do Sistema -->
                    <div class="bg-white rounded-lg p-4 border-2 border-green-400">
                        <div class="flex items-center gap-2 mb-3">
                            <span class="text-2xl">üí°</span>
                            <span class="font-bold text-green-800">Status do Sistema:</span>
                        </div>
                        <div class="space-y-2">
                            <div>
                                <span class="status-badge">
                                    ‚úÖ Sistema configurado
                                </span>
                            </div>
                            <div class="text-sm text-green-700">
                                <strong>√öltima atualiza√ß√£o:</strong> <span id="ultimaAtualizacao">-</span><br>
                                <strong>Total de se√ß√µes:</strong> 2 (Manual + Minimalista)<br>
                                <strong>Tipo:</strong> 10 n√∫meros (1-80) + Time do Cora√ß√£o
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Explica√ß√£o do Sistema -->
                <div class="mt-6 p-4 bg-gradient-to-r from-yellow-50 to-green-50 border-2 border-yellow-300 rounded-lg">
                    <div class="flex items-start gap-2">
                        <span class="text-xl">üîß</span>
                        <div>
                            <div class="font-bold text-yellow-800 mb-2">Como funciona:</div>
                            <div class="text-sm text-yellow-700">
                                A Timemania √© a loteria do FUTEBOL! Voc√™ escolhe 10 n√∫meros de 1 a 80 e 1 time do cora√ß√£o. Ganha com 3, 4, 5, 6 ou 7 acertos + acerto do time. Define o valor da aposta acima e todos os outros valores ser√£o calculados automaticamente.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- √öltimo Resultado -->
        <div id="ultimoResultado" class="hidden mb-6">
            <div class="bg-white rounded-lg shadow-lg overflow-hidden border-2 border-timemania">
                <div class="bg-timemania text-gray-800 p-4 text-center">
                    <h2 id="tituloResultado" class="text-xl font-bold">Concurso</h2>
                    <div id="dataResultado" class="text-sm">üìÖ Data do sorteio</div>
                </div>
                
                <div class="p-6">
                    <!-- N√∫meros Sorteados -->
                    <div class="text-center mb-4">
                        <h3 class="text-lg font-bold text-yellow-600 mb-3">‚öΩ N√öMEROS SORTEADOS</h3>
                        <div id="numerosResultado" class="flex flex-wrap justify-center gap-2 mb-4">
                            <!-- N√∫meros sorteados ser√£o inseridos aqui -->
                        </div>
                    </div>
                    
                    <!-- Time do Cora√ß√£o Sorteado -->
                    <div class="text-center mb-4">
                        <h3 class="text-lg font-bold text-timemania-green mb-3">üèÜ TIME DO CORA√á√ÉO</h3>
                        <div id="timeResultado" class="flex justify-center mb-4">
                            <!-- Time sorteado ser√° inserido aqui -->
                        </div>
                    </div>
                    
                    <div id="statusResultado" class="text-lg font-bold mb-4 text-red-600 text-center">
                        <!-- Status ser√° inserido aqui -->
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                        <div id="premiacao7"></div>
                        <div id="premiacao6"></div>
                    </div>
                    
                    <div class="mt-4 text-center">
                        <div class="text-sm text-gray-600">Pr√≥ximo Sorteio: <span id="proximoConcurso">Concurso</span></div>
                        <div class="text-sm text-gray-600" id="dataProximoConcurso">Data</div>
                        <div class="text-2xl font-bold text-timemania mt-2" id="premioEstimado">Pr√™mio Estimado</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- LAYOUT REORGANIZADO: SE√á√ïES LADO A LADO -->
        
        <!-- Primeira linha: SE√á√ÉO 1 e SE√á√ÉO 2 lado a lado -->
        <div class="grid grid-cols-1 xl:grid-cols-2 gap-6 mb-6">
            
            <!-- üéÆ SE√á√ÉO 1: JOGO MANUAL COMPLETO -->
            <div class="bg-white rounded-lg shadow-lg p-6 border-2 border-timemania">
                <h3 class="text-xl font-bold text-yellow-600 mb-4">üéÆ SE√á√ÉO 1: CRIA√á√ÉO MANUAL DE JOGOS</h3>

                <!-- Estrat√©gia N√∫meros + Time em Tempo Real -->
                <div class="mb-6 p-5 bg-gradient-to-br from-yellow-50 via-green-50 to-blue-50 border-4 border-timemania rounded-xl shadow-lg">
                    <div class="text-lg font-bold text-gray-800 mb-3 text-center">‚öΩ ESTRAT√âGIA: N√öMEROS + TIME DO CORA√á√ÉO</div>
                    
                    <!-- Padr√£o Hist√≥rico -->
                    <div class="mb-3 p-3 bg-gradient-to-r from-amber-50 to-orange-50 border-2 border-orange-300 rounded-lg text-center">
                        <div class="text-sm font-bold text-orange-800 mb-1">üèÜ PADR√ÉO MAIS COMUM:</div>
                        <div class="text-lg font-bold text-orange-900 mb-1">
                            <span class="text-yellow-600">5P/5I</span> + <span class="text-timemania-green">Time Popular</span>
                        </div>
                        <div class="text-xs text-orange-700">
                            Distribui√ß√£o equilibrada: 5 pares/5 √≠mpares + times com mais torcedores
                        </div>
                    </div>

                    <!-- √öltimo Sorteio -->
                    <div class="mb-3 p-2 bg-blue-100 border border-blue-300 rounded-lg text-center">
                        <div class="text-xs font-medium text-blue-800">üìä √öLTIMO SORTEIO:</div>
                        <div class="text-sm font-bold text-blue-900">
                            N√∫meros: <span id="paresUltimoSorteio" class="text-green-600">5</span>P + <span id="imparesUltimoSorteio" class="text-orange-600">5</span>I |
                            Time: <span id="timeUltimoSorteio" class="text-timemania-green">---</span>
                        </div>
                    </div>
                    
                    <!-- Contador Visual Atual -->
                    <div class="grid grid-cols-2 gap-4 mb-3">
                        <div class="text-center p-3 bg-yellow-100 rounded-lg border-2 border-yellow-300">
                            <div class="text-lg font-bold text-yellow-600">üìä N√öMEROS</div>
                            <div class="grid grid-cols-2 gap-2 mt-2">
                                <div class="text-center">
                                    <div class="text-2xl font-bold text-green-600 contador-destaque" id="paresNumeros">0</div>
                                    <div class="text-xs font-bold text-green-700">PARES</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-2xl font-bold text-orange-600 contador-destaque" id="imparesNumeros">0</div>
                                    <div class="text-xs font-bold text-orange-700">√çMPARES</div>
                                </div>
                            </div>
                        </div>
                        <div class="text-center p-3 bg-green-100 rounded-lg border-2 border-green-300">
                            <div class="text-lg font-bold text-timemania-green">‚öΩ TIME</div>
                            <div class="mt-2">
                                <div class="text-2xl font-bold text-timemania-green contador-destaque" id="timeSelecionado">--</div>
                                <div class="text-xs font-bold text-green-700">DO CORA√á√ÉO</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Status da Estrat√©gia -->
                    <div id="statusEstrategia" class="text-center p-2 rounded-lg font-bold text-sm bg-gray-100 text-gray-700">
                        ‚öΩ Selecione n√∫meros e time para ver sua estrat√©gia
                    </div>
                </div>

                <!-- N√∫meros e Time Sorteados -->
                <div class="mb-4 p-3 bg-red-50 border-2 border-red-300 rounded-lg">
                    <div class="text-sm font-bold text-red-800 mb-2">‚öΩ √öltimos sorteados:</div>
                    
                    <div class="mb-2">
                        <div class="text-xs font-bold text-yellow-700 mb-1">N√∫meros:</div>
                        <div id="numerosSorteadosDisplay" class="flex flex-wrap gap-1 mb-2">
                            <!-- N√∫meros sorteados aparecer√£o aqui -->
                        </div>
                    </div>
                    
                    <div class="mb-2">
                        <div class="text-xs font-bold text-timemania-green mb-1">Time:</div>
                        <div id="timeSorteadoDisplay" class="flex flex-wrap gap-1 mb-2">
                            <!-- Time sorteado aparecer√° aqui -->
                        </div>
                    </div>
                    
                    <div class="flex items-center">
                        <input type="checkbox" id="permitirSorteados" class="mr-2 scale-110">
                        <label for="permitirSorteados" class="text-red-800 text-sm font-medium">
                            üîì Permitir usar n√∫meros/time j√° sorteados
                        </label>
                    </div>
                </div>
            
                <!-- Quantidade de N√∫meros -->
                <div class="mb-3">
                    <label class="block text-yellow-600 font-medium mb-2 text-sm">N√∫meros (10-15):</label>
                    <select id="quantidadeNumeros" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-timemania text-base">
                        <option value="10" selected>10 n√∫meros - R$ 3,50</option>
                        <option value="11">11 n√∫meros - R$ 38,50</option>
                        <option value="12">12 n√∫meros - R$ 231,00</option>
                        <option value="13">13 n√∫meros - R$ 1.001,50</option>
                        <option value="14">14 n√∫meros - R$ 3.507,50</option>
                        <option value="15">15 n√∫meros - R$ 10.507,50</option>
                    </select>
                </div>

                <!-- Inser√ß√£o Manual -->
                <div class="mb-4">
                    <label class="block text-purple-600 font-medium mb-2 text-sm">‚úèÔ∏è Inser√ß√£o Manual:</label>
                    <div class="grid grid-cols-1 gap-2">
                        <textarea 
                            id="inputManualNumeros" 
                            class="w-full input-manual resize-none text-sm"
                            placeholder="N√öMEROS (1-80): 01, 02, 03, 04, 05, 06, 07, 08, 09, 10"
                            rows="2"
                        ></textarea>
                        <input 
                            id="inputManualTime" 
                            class="w-full input-manual text-sm"
                            placeholder="TIME: Digite o nome do time (ex: Flamengo, Corinthians, Palmeiras)"
                        />
                    </div>
                    <div class="flex justify-between items-center mt-2 text-xs">
                        <span class="text-purple-600">üí° Dica: Cole n√∫meros de qualquer formato</span>
                        <button id="processarInput" class="bg-purple-500 hover:bg-purple-600 text-white px-3 py-1 rounded text-xs">
                            üìù Processar
                        </button>
                    </div>
                </div>

                <!-- Grid de N√∫meros 1-80 -->
                <div class="mb-4">
                    <label class="block text-yellow-600 font-medium mb-2 text-sm">Selecione os N√∫meros (01-80):</label>
                    <div class="text-xs mb-2 text-gray-600">
                        <span class="text-timemania-green">‚óè</span> Verde = Pares | 
                        <span class="text-timemania">‚óè</span> Amarelo = √çmpares |
                        <span class="text-red-600">‚öΩ</span> J√° sorteados
                    </div>
                    <div id="gridNumeros" class="grid-timemania">
                        <!-- N√∫meros de 01 a 80 ser√£o gerados aqui -->
                    </div>
                </div>

                <!-- Sele√ß√£o de Time do Cora√ß√£o -->
                <div class="mb-4">
                    <label class="block text-timemania-green font-medium mb-2 text-sm">Selecione o Time do Cora√ß√£o:</label>
                    <div class="text-xs mb-2 text-gray-600">
                        <span class="text-timemania-green">‚öΩ</span> Times do futebol brasileiro | 
                        <span class="text-red-600">üéØ</span> J√° sorteado
                    </div>
                    <div id="gridTimes" class="grid-times">
                        <!-- Times ser√£o gerados aqui -->
                    </div>
                </div>

                <!-- √Åreas de Drag and Drop -->
                <div class="grid grid-cols-1 gap-4 mb-4">
                    <!-- N√∫meros Selecionados -->
                    <div>
                        <label class="block text-yellow-600 font-medium mb-2 text-sm">‚öΩ N√∫meros Selecionados:</label>
                        <div 
                            id="dropZoneNumeros" 
                            class="drop-zone"
                            ondrop="dropNumero(event)" 
                            ondragover="allowDrop(event)"
                            ondragenter="dragEnter(event)"
                            ondragleave="dragLeave(event)"
                        >
                            <div id="dropMessageNumeros">
                                <div class="text-sm mb-1">üì• Arraste n√∫meros aqui ou clique nos n√∫meros acima</div>
                                <div class="text-xs">Meta: <span id="quantidadeEspecificadaNum" class="font-bold">10</span> | Atual: <span id="numerosNaArea" class="font-bold">0</span></div>
                            </div>
                            <div id="numerosDropped" class="hidden flex flex-wrap justify-center gap-1">
                                <!-- N√∫meros selecionados aparecer√£o aqui -->
                            </div>
                        </div>
                    </div>

                    <!-- Time Selecionado -->
                    <div>
                        <label class="block text-timemania-green font-medium mb-2 text-sm">üèÜ Time do Cora√ß√£o:</label>
                        <div 
                            id="dropZoneTime" 
                            class="drop-zone-time"
                            ondrop="dropTime(event)" 
                            ondragover="allowDrop(event)"
                            ondragenter="dragEnter(event)"
                            ondragleave="dragLeave(event)"
                        >
                            <div id="dropMessageTime">
                                <div class="text-sm mb-1">‚öΩ Arraste seu time aqui ou clique no time acima</div>
                                <div class="text-xs">Selecione 1 time do cora√ß√£o</div>
                            </div>
                            <div id="timeDropped" class="hidden flex justify-center">
                                <!-- Time selecionado aparecer√° aqui -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Bot√µes de A√ß√£o -->
                <div class="flex flex-wrap gap-2">
                    <button id="limparJogo" class="bg-gray-500 hover:bg-gray-600 text-white px-3 py-2 rounded-lg text-sm">
                        üóëÔ∏è Limpar
                    </button>
                    <button id="randomizarJogo" class="bg-purple-500 hover:bg-purple-600 text-white px-3 py-2 rounded-lg text-sm">
                        üé≤ Aleat√≥rio
                    </button>
                    <button id="adicionarJogo" class="bg-timemania hover:bg-timemania-dark text-gray-800 px-3 py-2 rounded-lg text-sm disabled:opacity-50" disabled>
                        ‚ûï Adicionar Jogo
                    </button>
                </div>
            </div>
            
            <!-- üßÆ SE√á√ÉO 2: GERA√á√ÉO MINIMALISTA -->
            <div class="bg-white rounded-lg shadow-lg p-6 border-2 border-purple-500">
                <h3 class="text-xl font-bold text-purple-600 mb-4">üßÆ SE√á√ÉO 2: GERA√á√ÉO MINIMALISTA</h3>

                <!-- Dados do Pr√≥ximo Sorteio -->
                <div class="mb-4 p-3 bg-blue-50 border-2 border-blue-300 rounded-lg">
                    <div class="text-sm font-bold text-blue-800 mb-2 text-center">üìä Dados do Pr√≥ximo Sorteio</div>
                    <div class="bg-white p-3 rounded-lg border border-blue-300">
                        <div class="grid grid-cols-2 gap-3 text-xs">
                            <div>
                                <div class="font-bold text-blue-800">‚öΩ Concurso:</div>
                                <div id="proximoConcursoNum" class="text-blue-700">Loading...</div>
                            </div>
                            <div>
                                <div class="font-bold text-blue-800">üìÖ Data:</div>
                                <div id="dataProximoSorteio" class="text-blue-700">Loading...</div>
                            </div>
                            <div>
                                <div class="font-bold text-blue-800">üí∞ Pr√™mio:</div>
                                <div id="premioEstimadoMin" class="text-blue-700">Loading...</div>
                            </div>
                            <div>
                                <div class="font-bold text-blue-800">üìà Status:</div>
                                <div id="statusAPIMin" class="text-blue-700">Carregando...</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sele√ß√£o das Regras -->
                <div class="mb-4">
                    <div class="text-sm font-bold text-purple-800 mb-3">üìã Regras Minimalistas:</div>
                    
                    <div class="grid grid-cols-1 gap-2">
                        <!-- R1 - N√∫meros Diretos -->
                        <div class="regra-item" id="regra1">
                            <label class="flex items-start cursor-pointer">
                                <input type="checkbox" id="r1-direto" class="regra-checkbox mr-2 scale-110" checked>
                                <div>
                                    <div class="text-sm font-bold text-green-800">R1 - N√∫meros Diretos</div>
                                    <div class="text-xs text-green-700">Concurso, data, pr√™mio limitados a 1-80</div>
                                </div>
                            </label>
                        </div>

                        <!-- R2 - Soma de Componentes -->
                        <div class="regra-item" id="regra2">
                            <label class="flex items-start cursor-pointer">
                                <input type="checkbox" id="r2-soma" class="regra-checkbox mr-2 scale-110" checked>
                                <div>
                                    <div class="text-sm font-bold text-green-800">R2 - Soma de Componentes</div>
                                    <div class="text-xs text-green-700">Somar partes do concurso e data</div>
                                </div>
                            </label>
                        </div>

                        <!-- R3 - Times Populares -->
                        <div class="regra-item" id="regra3">
                            <label class="flex items-start cursor-pointer">
                                <input type="checkbox" id="r3-times" class="regra-checkbox mr-2 scale-110" checked>
                                <div>
                                    <div class="text-sm font-bold text-green-800">R3 - Times Populares</div>
                                    <div class="text-xs text-green-700">Flamengo, Corinthians, S√£o Paulo, Palmeiras</div>
                                </div>
                            </label>
                        </div>

                        <!-- R4 - Futebol Hist√≥rico -->
                        <div class="regra-item" id="regra4">
                            <label class="flex items-start cursor-pointer">
                                <input type="checkbox" id="r4-historico" class="regra-checkbox mr-2 scale-110" checked>
                                <div>
                                    <div class="text-sm font-bold text-green-800">R4 - Futebol Hist√≥rico</div>
                                    <div class="text-xs text-green-700">Anos de funda√ß√£o, t√≠tulos, datas importantes</div>
                                </div>
                            </label>
                        </div>

                        <!-- R5 - N√∫meros da Sorte -->
                        <div class="regra-item" id="regra5">
                            <label class="flex items-start cursor-pointer">
                                <input type="checkbox" id="r5-sorte" class="regra-checkbox mr-2 scale-110">
                                <div>
                                    <div class="text-sm font-bold text-green-800">R5 - N√∫meros da Sorte</div>
                                    <div class="text-xs text-green-700">7, 10, 9 (camisas famosas)</div>
                                </div>
                            </label>
                        </div>

                        <!-- R6 - M√∫ltiplos de 10 -->
                        <div class="regra-item" id="regra6">
                            <label class="flex items-start cursor-pointer">
                                <input type="checkbox" id="r6-multiplos" class="regra-checkbox mr-2 scale-110">
                                <div>
                                    <div class="text-sm font-bold text-green-800">R6 - M√∫ltiplos de 10</div>
                                    <div class="text-xs text-green-700">10, 20, 30, 40, 50, 60, 70, 80</div>
                                </div>
                            </label>
                        </div>

                        <!-- R7 - Extremos -->
                        <div class="regra-item" id="regra7">
                            <label class="flex items-start cursor-pointer">
                                <input type="checkbox" id="r7-extremos" class="regra-checkbox mr-2 scale-110">
                                <div>
                                    <div class="text-sm font-bold text-green-800">R7 - Extremos</div>
                                    <div class="text-xs text-green-700">1-10 e 71-80</div>
                                </div>
                            </label>
                        </div>

                        <!-- R8 - Sequ√™ncias -->
                        <div class="regra-item" id="regra8">
                            <label class="flex items-start cursor-pointer">
                                <input type="checkbox" id="r8-sequencias" class="regra-checkbox mr-2 scale-110">
                                <div>
                                    <div class="text-sm font-bold text-green-800">R8 - Sequ√™ncias</div>
                                    <div class="text-xs text-green-700">N√∫meros consecutivos baseados em datas</div>
                                </div>
                            </label>
                        </div>

                        <!-- R9 - Par/√çmpar Balanceado -->
                        <div class="regra-item" id="regra9">
                            <label class="flex items-start cursor-pointer">
                                <input type="checkbox" id="r9-parimpar" class="regra-checkbox mr-2 scale-110" checked>
                                <div>
                                    <div class="text-sm font-bold text-green-800">R9 - Par/√çmpar Balanceado</div>
                                    <div class="text-xs text-green-700">5P/5I distribui√ß√£o ideal</div>
                                </div>
                            </label>
                        </div>

                        <!-- R10 - Times Regionais -->
                        <div class="regra-item" id="regra10">
                            <label class="flex items-start cursor-pointer">
                                <input type="checkbox" id="r10-regionais" class="regra-checkbox mr-2 scale-110">
                                <div>
                                    <div class="text-sm font-bold text-green-800">R10 - Times Regionais</div>
                                    <div class="text-xs text-green-700">Gr√™mio, Internacional, Atl√©tico-MG, Cruzeiro</div>
                                </div>
                            </label>
                        </div>

                        <!-- R11 - Fibonacci -->
                        <div class="regra-item" id="regra11">
                            <label class="flex items-start cursor-pointer">
                                <input type="checkbox" id="r11-fibonacci" class="regra-checkbox mr-2 scale-110">
                                <div>
                                    <div class="text-sm font-bold text-green-800">R11 - Fibonacci</div>
                                    <div class="text-xs text-green-700">1, 1, 2, 3, 5, 8, 13, 21, 34, 55</div>
                                </div>
                            </label>
                        </div>

                        <!-- R12 - Primos -->
                        <div class="regra-item" id="regra12">
                            <label class="flex items-start cursor-pointer">
                                <input type="checkbox" id="r12-primos" class="regra-checkbox mr-2 scale-110">
                                <div>
                                    <div class="text-sm font-bold text-green-800">R12 - N√∫meros Primos</div>
                                    <div class="text-xs text-green-700">Primos at√© 80</div>
                                </div>
                            </label>
                        </div>

                        <!-- R13 - Quadrados -->
                        <div class="regra-item" id="regra13">
                            <label class="flex items-start cursor-pointer">
                                <input type="checkbox" id="r13-quadrados" class="regra-checkbox mr-2 scale-110">
                                <div>
                                    <div class="text-sm font-bold text-green-800">R13 - Quadrados Perfeitos</div>
                                    <div class="text-xs text-green-700">1, 4, 9, 16, 25, 36, 49, 64</div>
                                </div>
                            </label>
                        </div>

                        <!-- R14 - Times Nordestinos -->
                        <div class="regra-item" id="regra14">
                            <label class="flex items-start cursor-pointer">
                                <input type="checkbox" id="r14-nordeste" class="regra-checkbox mr-2 scale-110">
                                <div>
                                    <div class="text-sm font-bold text-green-800">R14 - Times Nordestinos</div>
                                    <div class="text-xs text-green-700">Bahia, Sport, Fortaleza, Cear√°</div>
                                </div>
                            </label>
                        </div>

                        <!-- R15 - D√©cadas -->
                        <div class="regra-item" id="regra15">
                            <label class="flex items-start cursor-pointer">
                                <input type="checkbox" id="r15-decadas" class="regra-checkbox mr-2 scale-110">
                                <div>
                                    <div class="text-sm font-bold text-green-800">R15 - Por D√©cadas</div>
                                    <div class="text-xs text-green-700">1-10, 11-20, 21-30, etc.</div>
                                </div>
                            </label>
                        </div>

                        <!-- R16 - Invers√£o -->
                        <div class="regra-item" id="regra16">
                            <label class="flex items-start cursor-pointer">
                                <input type="checkbox" id="r16-inversao" class="regra-checkbox mr-2 scale-110">
                                <div>
                                    <div class="text-sm font-bold text-green-800">R16 - Invers√£o</div>
                                    <div class="text-xs text-green-700">Espelhar n√∫meros (12‚Üí21, limitado a 80)</div>
                                </div>
                            </label>
                        </div>

                        <!-- R17 - Filtros Inteligentes -->
                        <div class="regra-item" id="regra17">
                            <label class="flex items-start cursor-pointer">
                                <input type="checkbox" id="r17-filtros" class="regra-checkbox mr-2 scale-110" checked>
                                <div>
                                    <div class="text-sm font-bold text-green-800">R17 - Filtros Inteligentes</div>
                                    <div class="text-xs text-green-700">Evitar padr√µes imposs√≠veis</div>
                                </div>
                            </label>
                        </div>

                        <!-- R18 - Balanceamento -->
                        <div class="regra-item" id="regra18">
                            <label class="flex items-start cursor-pointer">
                                <input type="checkbox" id="r18-balanceamento" class="regra-checkbox mr-2 scale-110" checked>
                                <div>
                                    <div class="text-sm font-bold text-green-800">R18 - Balanceamento</div>
                                    <div class="text-xs text-green-700">Distribuir por d√©cadas equilibradamente</div>
                                </div>
                            </label>
                        </div>

                        <!-- R19 - Otimiza√ß√£o Final -->
                        <div class="regra-item" id="regra19">
                            <label class="flex items-start cursor-pointer">
                                <input type="checkbox" id="r19-otimizacao" class="regra-checkbox mr-2 scale-110" checked>
                                <div>
                                    <div class="text-sm font-bold text-green-800">R19 - Otimiza√ß√£o Final</div>
                                    <div class="text-xs text-green-700">Formata√ß√£o e valida√ß√£o final</div>
                                </div>
                            </label>
                        </div>
                    </div>

                    <div class="mt-3 p-2 bg-purple-50 border border-purple-200 rounded-lg">
                        <div class="text-xs text-purple-800">
                            <strong>üìã Regras selecionadas:</strong> <span id="contadorRegras">8</span> de 19 dispon√≠veis<br>
                            <strong>üí° Recomenda√ß√£o:</strong> Use pelo menos 5 regras para maior diversidade<br>
                            <strong>‚öΩ Especial:</strong> Regras otimizadas para futebol (1-80 + times)
                        </div>
                    </div>
                </div>
                
                <!-- Configura√ß√µes -->
                <div class="mb-4">
                    <label class="block text-purple-600 font-medium mb-2 text-sm">‚öôÔ∏è Configura√ß√µes:</label>
                    <div class="grid grid-cols-2 gap-3">
                        <div>
                            <label class="block text-xs font-medium">Quantidade:</label>
                            <select id="qtdJogosMin" class="w-full px-2 py-2 border border-gray-300 rounded-lg text-sm">
                                <option value="3">3 jogos</option>
                                <option value="5" selected>5 jogos</option>
                                <option value="7">7 jogos</option>
                                <option value="10">10 jogos</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-xs font-medium">N√∫meros:</label>
                            <select id="numerosPorJogoMin" class="w-full px-2 py-2 border border-gray-300 rounded-lg text-sm">
                                <option value="10" selected>10 n√∫meros</option>
                                <option value="11">11 n√∫meros</option>
                                <option value="12">12 n√∫meros</option>
                                <option value="13">13 n√∫meros</option>
                                <option value="14">14 n√∫meros</option>
                                <option value="15">15 n√∫meros</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <!-- Estrat√©gia -->
                <div class="mb-4">
                    <label class="block text-purple-600 font-medium mb-2 text-sm">‚öΩ Estrat√©gia:</label>
                    <select id="estrategiaMin" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm">
                        <option value="equilibrada" selected>‚öΩ Equilibrada (5P/5I + populares)</option>
                        <option value="aleatorio">üé≤ Totalmente Aleat√≥rio</option>
                        <option value="pares">üìä Mais Pares</option>
                        <option value="impares">üìä Mais √çmpares</option>
                        <option value="extremos">üî• Extremos (1-10, 71-80)</option>
                        <option value="multiplos">üéØ M√∫ltiplos de 10</option>
                        <option value="futebol">‚öΩ Estrat√©gia Futebol</option>
                    </select>
                </div>
                
                <button id="gerarJogosMin" class="w-full bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-lg font-bold text-sm">
                    üöÄ Gerar Jogos Minimalistas
                </button>
                
                <div id="resultadosMin" class="mt-4 hidden">
                    <h4 class="font-bold text-purple-600 mb-2 text-sm">‚öΩ Jogos Gerados:</h4>
                    <div id="listaJogosMin" class="space-y-2 h-80 overflow-y-auto border-2 border-purple-200 rounded-lg p-3 bg-gray-50 shadow-inner">
                        <!-- Jogos minimalistas aparecer√£o aqui -->
                    </div>
                    <div class="mt-3 text-center">
                        <button id="adicionarTodosMin" class="bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-lg text-sm">
                            ‚ûï Adicionar Todos
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Segunda linha: MEUS JOGOS ocupando toda a largura -->
        <div class="space-y-6">
            <!-- Resumo e Controles -->
            <div class="bg-white rounded-lg shadow-lg p-6 border-2 border-timemania">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold text-yellow-600">üìã MEUS JOGOS</h3>
                    <div class="flex items-center gap-2">
                        <label class="flex items-center text-sm">
                            <input type="checkbox" id="mostrarOrdemCrescente" class="mr-2" checked>
                            üî¢ Ordem Crescente
                        </label>
                    </div>
                </div>

                <!-- Custo Total -->
                <div class="mb-4">
                    <div class="bg-gradient-to-r from-timemania to-timemania-dark text-gray-800 p-4 rounded-lg text-center">
                        <div class="text-2xl font-bold">üí∞ Total: <span id="custoTotal">R$ 0,00</span></div>
                        <div class="text-sm mt-1"><span id="totalJogos">0</span> jogo(s) adicionado(s) | Loteria do FUTEBOL!</div>
                    </div>
                </div>

                <!-- Bot√µes de Download -->
                <div class="grid grid-cols-4 gap-2 mb-4">
                    <button id="downloadHTML" class="bg-orange-500 hover:bg-orange-600 text-white px-3 py-2 rounded-lg text-sm">
                        üåê HTML
                    </button>
                    <button id="downloadTXT" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-2 rounded-lg text-sm" title="Gera arquivo TXT simples contendo apenas os n√∫meros dos jogos, um jogo por linha">
                        üìÑ TXT
                    </button>
                    <button id="downloadXLSX" class="bg-green-500 hover:bg-green-600 text-white px-3 py-2 rounded-lg text-sm">
                        üìä XLSX
                    </button>
                    <button id="limparTodos" class="bg-red-500 hover:bg-red-600 text-white px-3 py-2 rounded-lg text-sm">
                        üóëÔ∏è Limpar
                    </button>
                </div>

                <!-- Lista dos Jogos -->
                <div class="bg-gray-50 rounded-lg p-4 max-h-96 overflow-y-auto border">
                    <h4 class="font-bold text-gray-800 mb-4">Lista de Jogos:</h4>
                    <div id="listaJogos">
                        <p class="text-gray-500 text-center py-8">Nenhum jogo adicionado ainda</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ===== VARI√ÅVEIS GLOBAIS =====
        let ultimoResultado = null;
        let numerosDropArea = [];
        let timeDropArea = null;
        let meusJogos = [];
        let numerosSorteados = new Set();
        let timeSorteado = null;
        let permitirNumerosSorteados = false;
        
        const sistemaValores = {
            valorSimples: 3.50,
            multiplicadores: {
                10: 1, 11: 11, 12: 66, 13: 286, 14: 1001, 15: 3003
            },
            obterValor: function(numeros) {
                return this.valorSimples * (this.multiplicadores[numeros] || 1);
            },
            atualizarValorSimples: function(novoValor) {
                this.valorSimples = parseFloat(novoValor);
                this.atualizarInterfaceValores();
            },
            atualizarInterfaceValores: function() {
                // Atualizar dropdown
                const select = document.getElementById('quantidadeNumeros');
                if (select) {
                    let options = '';
                    for (let i = 10; i <= 15; i++) {
                        const selected = i === 10 ? ' selected' : '';
                        options += `<option value="${i}"${selected}>${i} n√∫meros - ${formatarMoeda(this.obterValor(i))}</option>`;
                    }
                    select.innerHTML = options;
                }
                
                // Atualizar valores na se√ß√£o de configura√ß√£o
                document.getElementById('valor11numeros').textContent = `11x = ${formatarMoeda(this.obterValor(11))}`;
                document.getElementById('valor12numeros').textContent = `66x = ${formatarMoeda(this.obterValor(12))}`;
                document.getElementById('valor15numeros').textContent = `3003x = ${formatarMoeda(this.obterValor(15))}`;
                
                // Atualizar timestamp
                document.getElementById('ultimaAtualizacao').textContent = new Date().toLocaleString('pt-BR');
                
                // RECALCULAR CUSTOS DOS JOGOS EXISTENTES
                meusJogos.forEach(jogo => {
                    jogo.custo = this.obterValor(jogo.numeros.length);
                });
                
                // Atualizar visualiza√ß√£o dos jogos
                atualizarVisualizacaoJogos();
                
                // Recalcular custo total dos jogos
                atualizarCustoTotal();
            }
        };

        // ===== TIMES DO FUTEBOL BRASILEIRO =====
        const timesBrasileiros = [
            { id: 1, nome: "Flamengo", estado: "RJ" },
            { id: 2, nome: "Corinthians", estado: "SP" },
            { id: 3, nome: "S√£o Paulo", estado: "SP" },
            { id: 4, nome: "Palmeiras", estado: "SP" },
            { id: 5, nome: "Santos", estado: "SP" },
            { id: 6, nome: "Gr√™mio", estado: "RS" },
            { id: 7, nome: "Internacional", estado: "RS" },
            { id: 8, nome: "Cruzeiro", estado: "MG" },
            { id: 9, nome: "Atl√©tico-MG", estado: "MG" },
            { id: 10, nome: "Fluminense", estado: "RJ" },
            { id: 11, nome: "Botafogo", estado: "RJ" },
            { id: 12, nome: "Vasco", estado: "RJ" },
            { id: 13, nome: "Bahia", estado: "BA" },
            { id: 14, nome: "Sport", estado: "PE" },
            { id: 15, nome: "Fortaleza", estado: "CE" },
            { id: 16, nome: "Cear√°", estado: "CE" },
            { id: 17, nome: "Guarani", estado: "SP" },
            { id: 18, nome: "Ponte Preta", estado: "SP" },
            { id: 19, nome: "Ava√≠", estado: "SC" },
            { id: 20, nome: "Figueirense", estado: "SC" },
            { id: 21, nome: "Coritiba", estado: "PR" },
            { id: 22, nome: "Athletico-PR", estado: "PR" },
            { id: 23, nome: "Goi√°s", estado: "GO" },
            { id: 24, nome: "Vila Nova", estado: "GO" },
            { id: 25, nome: "N√°utico", estado: "PE" },
            { id: 26, nome: "Santa Cruz", estado: "PE" },
            { id: 27, nome: "Vit√≥ria", estado: "BA" },
            { id: 28, nome: "CSA", estado: "AL" },
            { id: 29, nome: "CRB", estado: "AL" },
            { id: 30, nome: "Sampaio Corr√™a", estado: "MA" },
            { id: 31, nome: "ABC", estado: "RN" },
            { id: 32, nome: "Am√©rica-RN", estado: "RN" },
            { id: 33, nome: "Campinense", estado: "PB" },
            { id: 34, nome: "Treze", estado: "PB" },
            { id: 35, nome: "Sergipe", estado: "SE" },
            { id: 36, nome: "Confian√ßa", estado: "SE" },
            { id: 37, nome: "River", estado: "PI" },
            { id: 38, nome: "Parnahyba", estado: "PI" },
            { id: 39, nome: "Remo", estado: "PA" },
            { id: 40, nome: "Paysandu", estado: "PA" },
            { id: 41, nome: "Am√©rica-MG", estado: "MG" },
            { id: 42, nome: "Atl√©tico-GO", estado: "GO" },
            { id: 43, nome: "Chapecoense", estado: "SC" },
            { id: 44, nome: "Crici√∫ma", estado: "SC" },
            { id: 45, nome: "Londrina", estado: "PR" },
            { id: 46, nome: "Oper√°rio-PR", estado: "PR" },
            { id: 47, nome: "Juventude", estado: "RS" },
            { id: 48, nome: "Brasil de Pelotas", estado: "RS" },
            { id: 49, nome: "Cuiab√°", estado: "MT" },
            { id: 50, nome: "Mixto", estado: "MT" },
            { id: 51, nome: "Rio Branco-AC", estado: "AC" },
            { id: 52, nome: "Atl√©tico-AC", estado: "AC" },
            { id: 53, nome: "Nacional-AM", estado: "AM" },
            { id: 54, nome: "Manaus", estado: "AM" },
            { id: 55, nome: "Tuna Luso", estado: "PA" },
            { id: 56, nome: "Independente-PA", estado: "PA" },
            { id: 57, nome: "Ji-Paran√°", estado: "RO" },
            { id: 58, nome: "Porto Velho", estado: "RO" },
            { id: 59, nome: "S√£o Raimundo-RR", estado: "RR" },
            { id: 60, nome: "Atl√©tico-RR", estado: "RR" },
            { id: 61, nome: "Palmas", estado: "TO" },
            { id: 62, nome: "Tocantin√≥polis", estado: "TO" },
            { id: 63, nome: "Brasiliense", estado: "DF" },
            { id: 64, nome: "Gama", estado: "DF" },
            { id: 65, nome: "Aparecidense", estado: "GO" },
            { id: 66, nome: "An√°polis", estado: "GO" },
            { id: 67, nome: "Uberl√¢ndia", estado: "MG" },
            { id: 68, nome: "Boa Esporte", estado: "MG" },
            { id: 69, nome: "Nova Igua√ßu", estado: "RJ" },
            { id: 70, nome: "Bangu", estado: "RJ" },
            { id: 71, nome: "Portuguesa", estado: "SP" },
            { id: 72, nome: "Ituano", estado: "SP" },
            { id: 73, nome: "Bragantino", estado: "SP" },
            { id: 74, nome: "Mirassol", estado: "SP" },
            { id: 75, nome: "Novorizontino", estado: "SP" },
            { id: 76, nome: "S√£o Bento", estado: "SP" },
            { id: 77, nome: "Oeste", estado: "SP" },
            { id: 78, nome: "Ferrovi√°ria", estado: "SP" },
            { id: 79, nome: "S√£o Caetano", estado: "SP" },
            { id: 80, nome: "Mogi Mirim", estado: "SP" }
        ];

        // ===== DADOS DE EXEMPLO (caso API falhe) =====
        const DADOS_EXEMPLO = {
            numero: 2150,
            dataApuracao: "20/01/2025",
            dataProximoConcurso: "23/01/2025",
            listaDezenas: ["05", "12", "23", "34", "45", "49", "67", "72", "78", "80"],
            timeCoracao: "15", // Fortaleza
            acumulado: false,
            valorEstimadoProximoConcurso: 1200000.00,
            listaRateioPremio: [
                { descricaoFaixa: "7 acertos", numeroDeGanhadores: 1, valorPremio: 800000.00 },
                { descricaoFaixa: "6 acertos", numeroDeGanhadores: 45, valorPremio: 1850.50 },
                { descricaoFaixa: "5 acertos", numeroDeGanhadores: 1234, valorPremio: 150.00 },
                { descricaoFaixa: "4 acertos", numeroDeGanhadores: 12345, valorPremio: 9.50 }
            ]
        };

        // ===== INICIALIZA√á√ÉO =====
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                await carregarUltimoResultado();
            } catch (error) {
                console.log('Usando dados de exemplo para Timemania');
                usarDadosExemplo();
            }
            
            inicializarInterface();
            configurarEventListeners();
            inicializarConfiguracaoPrincipal();
        });

        function inicializarConfiguracaoPrincipal() {
            // Inicializar timestamp
            document.getElementById('ultimaAtualizacao').textContent = new Date().toLocaleString('pt-BR');
            
            // Configurar eventos da se√ß√£o de configura√ß√£o
            document.getElementById('atualizarValor').addEventListener('click', () => {
                const novoValor = parseFloat(document.getElementById('valorApostaSimples').value);
                if (novoValor > 0) {
                    sistemaValores.atualizarValorSimples(novoValor);
                    showCustomAlert('‚úÖ Valores Atualizados', `Novo valor base: ${formatarMoeda(novoValor)}\n\nTodos os valores foram recalculados automaticamente!`);
                } else {
                    showCustomAlert('‚ö†Ô∏è Valor Inv√°lido', 'Insira um valor maior que zero!');
                }
            });
            
            // Inicializar valores na interface
            sistemaValores.atualizarInterfaceValores();
        }

        async function carregarUltimoResultado() {
            try {
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), 3000);
                
                const response = await fetch('https://servicebus2.caixa.gov.br/portaldeloterias/api/timemania', {
                    signal: controller.signal,
                    headers: { 'Accept': 'application/json' }
                });
                
                clearTimeout(timeoutId);
                
                if (response.ok) {
                    const data = await response.json();
                    if (data && data.numero && data.numero > 0) {
                        ultimoResultado = data;
                        exibirUltimoResultado(data);
                        return;
                    }
                }
                
                throw new Error('API n√£o retornou dados v√°lidos');
                
            } catch (error) {
                throw error;
            }
        }

        function usarDadosExemplo() {
            ultimoResultado = DADOS_EXEMPLO;
            exibirUltimoResultado(ultimoResultado);
        }

        function exibirUltimoResultado(data) {
            const numeros = data.listaDezenas || [];
            const timeCoracaoId = data.timeCoracao || data.timeDoCoracao || "15";
            
            document.getElementById('tituloResultado').textContent = `Concurso ${data.numero}`;
            document.getElementById('dataResultado').textContent = `üìÖ ${data.dataApuracao}`;

            // N√∫meros
            const numerosDiv = document.getElementById('numerosResultado');
            numerosDiv.innerHTML = '';
            numeros.forEach(num => {
                const numeroEl = document.createElement('div');
                numeroEl.className = 'numero-resultado';
                numeroEl.textContent = num;
                numerosDiv.appendChild(numeroEl);
            });

            // Time do Cora√ß√£o
            const timeDiv = document.getElementById('timeResultado');
            timeDiv.innerHTML = '';
            const timeInfo = timesBrasileiros.find(t => t.id === parseInt(timeCoracaoId)) || timesBrasileiros[14]; // Fallback para Fortaleza
            const timeEl = document.createElement('div');
            timeEl.className = 'time-resultado';
            timeEl.textContent = timeInfo.nome;
            timeDiv.appendChild(timeEl);

            document.getElementById('statusResultado').textContent = data.acumulado ? 'ACUMULOU!' : 'TEVE GANHADOR!';

            if (data.listaRateioPremio && data.listaRateioPremio.length >= 2) {
                document.getElementById('premiacao7').innerHTML = `
                    <span class="text-yellow-600 mr-2">‚öΩ</span>
                    <span>7 acertos: ${data.listaRateioPremio[0] ? data.listaRateioPremio[0].numeroDeGanhadores : 0} - ${formatarMoeda(data.listaRateioPremio[0] ? data.listaRateioPremio[0].valorPremio : 0)}</span>
                `;
                document.getElementById('premiacao6').innerHTML = `
                    <span class="text-yellow-600 mr-2">‚öΩ</span>
                    <span>6 acertos: ${data.listaRateioPremio[1] ? data.listaRateioPremio[1].numeroDeGanhadores : 0} - ${formatarMoeda(data.listaRateioPremio[1] ? data.listaRateioPremio[1].valorPremio : 0)}</span>
                `;
            }

            document.getElementById('proximoConcurso').textContent = `Concurso ${data.numero + 1}`;
            document.getElementById('dataProximoConcurso').textContent = data.dataProximoConcurso || 'A definir';
            document.getElementById('premioEstimado').textContent = formatarMoeda(data.valorEstimadoProximoConcurso || 1200000);

            // Dados se√ß√£o minimalista
            document.getElementById('proximoConcursoNum').textContent = data.numero + 1;
            document.getElementById('dataProximoSorteio').textContent = data.dataProximoConcurso || 'A definir';
            document.getElementById('premioEstimadoMin').textContent = formatarMoeda(data.valorEstimadoProximoConcurso || 1200000);
            document.getElementById('statusAPIMin').textContent = 'Dados carregados';

            analisarParesImparesTempoReal(numeros, timeInfo);
            identificarNumerosSorteados(numeros, timeCoracaoId);
            exibirNumerosSorteados(numeros, timeInfo);
            
            document.getElementById('ultimoResultado').classList.remove('hidden');
        }

        function analisarParesImparesTempoReal(numeros, timeInfo) {
            let pares = 0, impares = 0;
            
            numeros.forEach(num => {
                const numero = parseInt(num);
                if (numero % 2 === 0) pares++; else impares++;
            });
            
            document.getElementById('paresUltimoSorteio').textContent = pares;
            document.getElementById('imparesUltimoSorteio').textContent = impares;
            document.getElementById('timeUltimoSorteio').textContent = timeInfo ? timeInfo.nome.substring(0, 10) : '---';
            
            atualizarContadorParesImpares();
        }

        function identificarNumerosSorteados(numeros, timeId) {
            numerosSorteados.clear();
            numeros.forEach(num => {
                numerosSorteados.add(parseInt(num));
            });
            timeSorteado = parseInt(timeId);
        }

        function exibirNumerosSorteados(numeros, timeInfo) {
            const displayNumeros = document.getElementById('numerosSorteadosDisplay');
            displayNumeros.innerHTML = numeros.map(num => 
                `<span class="inline-block bg-red-500 text-white px-2 py-1 rounded text-xs font-bold">${num}</span>`
            ).join('');
            
            const displayTime = document.getElementById('timeSorteadoDisplay');
            displayTime.innerHTML = timeInfo ? 
                `<span class="inline-block bg-red-500 text-white px-3 py-1 rounded text-xs font-bold">‚öΩ${timeInfo.nome}</span>` :
                '<span class="text-gray-500 text-xs">Time n√£o encontrado</span>';
        }

        function inicializarInterface() {
            numerosDropArea = [];
            timeDropArea = null;
            criarGridNumeros();
            criarGridTimes();
            configurarDragAndDrop();
            atualizarContadorParesImpares();
            atualizarVisualizacaoDropAreas();
            configurarRegrasMinimalistas();
        }

        function criarGridNumeros() {
            const grid = document.getElementById('gridNumeros');
            grid.innerHTML = '';
            
            for (let i = 1; i <= 80; i++) {
                const btn = document.createElement('button');
                btn.className = 'numero-time';
                
                // Classificar por par/√≠mpar
                if (i % 2 === 0) {
                    btn.classList.add('par');
                } else {
                    btn.classList.add('impar');
                }
                
                if (numerosSorteados.has(i)) {
                    btn.classList.add('sorteado');
                    if (!permitirNumerosSorteados) {
                        btn.classList.add('disabled');
                        btn.disabled = true;
                    }
                }
                
                btn.textContent = i.toString().padStart(2, '0');
                btn.onclick = () => toggleNumero(i);
                btn.draggable = true;
                btn.dataset.numero = i;
                btn.dataset.tipo = 'numero';
                
                btn.addEventListener('dragstart', (e) => {
                    if (btn.disabled) {
                        e.preventDefault();
                        return;
                    }
                    e.dataTransfer.setData('text/plain', `numero:${i}`);
                    btn.classList.add('dragging');
                });
                
                btn.addEventListener('dragend', () => {
                    btn.classList.remove('dragging');
                });
                
                grid.appendChild(btn);
            }
        }

        function criarGridTimes() {
            const grid = document.getElementById('gridTimes');
            grid.innerHTML = '';
            
            timesBrasileiros.forEach(time => {
                const btn = document.createElement('button');
                btn.className = 'time-coracao';
                
                if (timeSorteado === time.id) {
                    btn.classList.add('sorteado');
                    if (!permitirNumerosSorteados) {
                        btn.classList.add('disabled');
                        btn.disabled = true;
                    }
                }
                
                btn.innerHTML = `<div class="text-xs font-bold">${time.nome}</div><div class="text-xs">${time.estado}</div>`;
                btn.onclick = () => toggleTime(time.id);
                btn.draggable = true;
                btn.dataset.timeId = time.id;
                btn.dataset.tipo = 'time';
                
                btn.addEventListener('dragstart', (e) => {
                    if (btn.disabled) {
                        e.preventDefault();
                        return;
                    }
                    e.dataTransfer.setData('text/plain', `time:${time.id}`);
                    btn.classList.add('dragging');
                });
                
                btn.addEventListener('dragend', () => {
                    btn.classList.remove('dragging');
                });
                
                grid.appendChild(btn);
            });
        }

        function configurarRegrasMinimalistas() {
            const checkboxes = document.querySelectorAll('.regra-checkbox');
            
            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', atualizarContadorRegras);
            });
            
            atualizarContadorRegras();
        }

        function atualizarContadorRegras() {
            const checkboxes = document.querySelectorAll('.regra-checkbox:checked');
            document.getElementById('contadorRegras').textContent = checkboxes.length;
            
            document.querySelectorAll('.regra-item').forEach((item, index) => {
                const checkbox = item.querySelector('.regra-checkbox');
                if (checkbox && checkbox.checked) {
                    item.classList.add('ativa');
                } else {
                    item.classList.remove('ativa');
                }
            });
        }

        function configurarDragAndDrop() {
            // Configurar drops zones (j√° configurado no HTML com eventos inline)
        }

        function configurarEventListeners() {
            // Checkbox n√∫meros sorteados
            document.getElementById('permitirSorteados').addEventListener('change', (e) => {
                permitirNumerosSorteados = e.target.checked;
                criarGridNumeros();
                criarGridTimes();
            });

            // Input manual
            document.getElementById('processarInput').addEventListener('click', processarNumerosInput);

            // Bot√µes principais
            document.getElementById('quantidadeNumeros').addEventListener('change', (e) => {
                limparSelecao();
                atualizarVisualizacaoDropAreas();
            });

            document.getElementById('limparJogo').addEventListener('click', limparSelecao);
            document.getElementById('randomizarJogo').addEventListener('click', randomizarJogo);
            document.getElementById('adicionarJogo').addEventListener('click', adicionarJogo);
            
            // Minimalista
            document.getElementById('gerarJogosMin').addEventListener('click', gerarJogosMinimalistas);
            document.getElementById('adicionarTodosMin').addEventListener('click', adicionarTodosJogosMinimalistas);
            
            // Controles
            document.getElementById('mostrarOrdemCrescente').addEventListener('change', atualizarVisualizacaoJogos);
            document.getElementById('limparTodos').addEventListener('click', limparTodosJogos);
            
            // Downloads
            document.getElementById('downloadHTML').addEventListener('click', () => downloadJogos('html'));
            document.getElementById('downloadTXT').addEventListener('click', () => downloadJogos('txt'));
            document.getElementById('downloadXLSX').addEventListener('click', () => downloadJogos('xlsx'));
        }

        // ===== FUN√á√ïES PRINCIPAIS =====

        function toggleNumero(numero) {
            if (numerosSorteados.has(numero) && !permitirNumerosSorteados) {
                showCustomAlert('‚ö†Ô∏è N√∫mero J√° Sorteado', `O n√∫mero ${numero.toString().padStart(2, '0')} saiu no √∫ltimo concurso.`);
                return;
            }
            
            const btn = document.querySelector(`[data-numero="${numero}"][data-tipo="numero"]`);
            const maxSelecionados = parseInt(document.getElementById('quantidadeNumeros').value);
            
            if (numerosDropArea.includes(numero)) {
                removerNumeroDropArea(numero);
                btn.classList.remove('selecionado');
            } else if (numerosDropArea.length < maxSelecionados) {
                adicionarNumeroDropArea(numero);
                btn.classList.add('selecionado');
            } else {
                showCustomAlert('‚ö†Ô∏è Limite Atingido', `Voc√™ j√° selecionou ${maxSelecionados} n√∫meros!`);
            }
        }

        function toggleTime(timeId) {
            if (timeSorteado === timeId && !permitirNumerosSorteados) {
                const timeInfo = timesBrasileiros.find(t => t.id === timeId);
                showCustomAlert('‚ö†Ô∏è Time J√° Sorteado', `O ${timeInfo.nome} saiu no √∫ltimo concurso.`);
                return;
            }
            
            // Limpar sele√ß√£o anterior de time
            document.querySelectorAll('[data-tipo="time"]').forEach(btn => btn.classList.remove('selecionado'));
            
            const btn = document.querySelector(`[data-time-id="${timeId}"]`);
            
            if (timeDropArea === timeId) {
                timeDropArea = null;
                btn.classList.remove('selecionado');
            } else {
                timeDropArea = timeId;
                btn.classList.add('selecionado');
            }
            
            atualizarVisualizacaoDropAreas();
            atualizarContadorParesImpares();
            validarBotaoAdicionar();
        }

        function adicionarNumeroDropArea(numero) {
            const quantidadePermitida = parseInt(document.getElementById('quantidadeNumeros').value);
            
            if (!numerosDropArea.includes(numero) && numerosDropArea.length < quantidadePermitida) {
                numerosDropArea.push(numero);
                atualizarVisualizacaoDropAreas();
                atualizarContadorParesImpares();
                validarBotaoAdicionar();
            }
        }

        function removerNumeroDropArea(numero) {
            numerosDropArea = numerosDropArea.filter(n => n !== numero);
            atualizarVisualizacaoDropAreas();
            atualizarContadorParesImpares();
            validarBotaoAdicionar();
        }

        function atualizarVisualizacaoDropAreas() {
            // Atualizar √°rea de n√∫meros
            const dropZoneNumeros = document.getElementById('dropZoneNumeros');
            const dropMessageNumeros = document.getElementById('dropMessageNumeros');
            const numerosDropped = document.getElementById('numerosDropped');
            const numerosNaArea = document.getElementById('numerosNaArea');
            const quantidadeEspecificadaNum = document.getElementById('quantidadeEspecificadaNum');
            
            const quantidadeAtualNum = parseInt(document.getElementById('quantidadeNumeros').value) || 10;
            
            quantidadeEspecificadaNum.textContent = quantidadeAtualNum.toString();
            numerosNaArea.textContent = numerosDropArea.length.toString();
            
            if (numerosDropArea.length === 0) {
                dropMessageNumeros.classList.remove('hidden');
                numerosDropped.classList.add('hidden');
            } else {
                dropMessageNumeros.classList.add('hidden');
                numerosDropped.classList.remove('hidden');
                
                numerosDropped.innerHTML = numerosDropArea
                    .map(numero => `
                        <div class="numero-drop">
                            ${numero.toString().padStart(2, '0')}
                            <div class="remove-btn" onclick="removerNumeroDropArea(${numero}); document.querySelector('[data-numero=\\'${numero}\\'][data-tipo=\\'numero\\']').classList.remove('selecionado');">√ó</div>
                        </div>
                    `).join('');
            }

            // Atualizar √°rea de time
            const dropZoneTime = document.getElementById('dropZoneTime');
            const dropMessageTime = document.getElementById('dropMessageTime');
            const timeDropped = document.getElementById('timeDropped');
            
            if (timeDropArea === null) {
                dropMessageTime.classList.remove('hidden');
                timeDropped.classList.add('hidden');
            } else {
                dropMessageTime.classList.add('hidden');
                timeDropped.classList.remove('hidden');
                
                const timeInfo = timesBrasileiros.find(t => t.id === timeDropArea);
                timeDropped.innerHTML = `
                    <div class="time-drop">
                        ${timeInfo.nome}
                        <div class="remove-btn" onclick="timeDropArea = null; document.querySelector('[data-time-id=\\'${timeDropArea}\\']').classList.remove('selecionado'); atualizarVisualizacaoDropAreas(); atualizarContadorParesImpares(); validarBotaoAdicionar();">√ó</div>
                    </div>
                `;
            }
        }

        function processarNumerosInput() {
            const inputNumeros = document.getElementById('inputManualNumeros');
            const inputTime = document.getElementById('inputManualTime');
            const textoNumeros = inputNumeros.value.trim();
            const textoTime = inputTime.value.trim();
            
            if (!textoNumeros && !textoTime) {
                showCustomAlert('‚ö†Ô∏è Campo Vazio', 'Digite alguns n√∫meros ou nome de time primeiro!');
                return;
            }
            
            let processadoComSucesso = false;
            
            // Processar n√∫meros
            if (textoNumeros) {
                const numerosTexto = textoNumeros.match(/\d+/g);
                if (numerosTexto) {
                    const numerosValidos = numerosTexto
                        .map(n => parseInt(n))
                        .filter(n => n >= 1 && n <= 80)
                        .filter((n, index, arr) => arr.indexOf(n) === index);
                    
                    if (numerosValidos.length > 0) {
                        const quantidadePermitida = parseInt(document.getElementById('quantidadeNumeros').value);
                        const numerosParaAplicar = numerosValidos.slice(0, quantidadePermitida);
                        
                        numerosDropArea = [];
                        document.querySelectorAll('[data-tipo="numero"]').forEach(btn => btn.classList.remove('selecionado'));
                        
                        numerosParaAplicar.forEach(numero => {
                            numerosDropArea.push(numero);
                            const btn = document.querySelector(`[data-numero="${numero}"][data-tipo="numero"]`);
                            if (btn) btn.classList.add('selecionado');
                        });
                        
                        processadoComSucesso = true;
                    }
                }
            }
            
            // Processar time
            if (textoTime) {
                const timeEncontrado = timesBrasileiros.find(t => 
                    t.nome.toLowerCase().includes(textoTime.toLowerCase()) ||
                    textoTime.toLowerCase().includes(t.nome.toLowerCase())
                );
                
                if (timeEncontrado) {
                    document.querySelectorAll('[data-tipo="time"]').forEach(btn => btn.classList.remove('selecionado'));
                    
                    timeDropArea = timeEncontrado.id;
                    const btn = document.querySelector(`[data-time-id="${timeEncontrado.id}"]`);
                    if (btn) btn.classList.add('selecionado');
                    
                    processadoComSucesso = true;
                } else {
                    showCustomAlert('‚ö†Ô∏è Time N√£o Encontrado', `Time "${textoTime}" n√£o encontrado. Tente: Flamengo, Corinthians, S√£o Paulo, etc.`);
                }
            }
            
            if (processadoComSucesso) {
                inputNumeros.value = '';
                inputTime.value = '';
                
                atualizarVisualizacaoDropAreas();
                atualizarContadorParesImpares();
                validarBotaoAdicionar();
                
                showCustomAlert('‚úÖ Sucesso', `Dados aplicados com sucesso!`);
            } else if (!textoTime) {
                showCustomAlert('‚ùå Erro', 'Nenhum n√∫mero v√°lido encontrado!');
            }
        }

        function atualizarContadorParesImpares() {
            // Contar pares/√≠mpares dos n√∫meros
            const pares = numerosDropArea.filter(num => num % 2 === 0).length;
            const impares = numerosDropArea.filter(num => num % 2 !== 0).length;
            
            document.getElementById('paresNumeros').textContent = pares;
            document.getElementById('imparesNumeros').textContent = impares;
            
            // Mostrar time selecionado
            const timeInfo = timeDropArea ? timesBrasileiros.find(t => t.id === timeDropArea) : null;
            document.getElementById('timeSelecionado').textContent = timeInfo ? timeInfo.nome.substring(0, 8) : '--';
            
            // Animar contadores
            document.querySelectorAll('.contador-destaque').forEach(el => {
                el.classList.add('contador-destaque');
            });
            
            setTimeout(() => {
                document.querySelectorAll('.contador-destaque').forEach(el => {
                    el.classList.remove('contador-destaque');
                });
            }, 500);
            
            // Status da estrat√©gia
            const totalNumeros = numerosDropArea.length;
            const temTime = timeDropArea !== null;
            const statusEl = document.getElementById('statusEstrategia');
            
            if (totalNumeros === 0 && !temTime) {
                statusEl.textContent = '‚öΩ Selecione n√∫meros e time para ver sua estrat√©gia';
                statusEl.className = 'text-center p-2 rounded-lg font-bold text-sm bg-gray-100 text-gray-700';
            } else if (totalNumeros < 10 || !temTime) {
                const faltaNumeros = Math.max(0, 10 - totalNumeros);
                const faltaTime = !temTime ? ' e 1 time' : '';
                statusEl.textContent = `üìç Faltam: ${faltaNumeros} n√∫meros${faltaTime}`;
                statusEl.className = 'text-center p-2 rounded-lg font-bold text-sm bg-blue-100 text-blue-800';
            } else {
                const estrategiaIdeal = (pares === 5 && impares === 5);
                const timePopular = timeInfo && [1, 2, 3, 4].includes(timeInfo.id); // Flamengo, Corinthians, S√£o Paulo, Palmeiras
                
                if (estrategiaIdeal && timePopular) {
                    statusEl.textContent = '‚öΩ ESTRAT√âGIA PERFEITA! 5P/5I + time popular';
                    statusEl.className = 'text-center p-2 rounded-lg font-bold text-sm bg-green-200 text-green-800 meta-atingida';
                } else if (Math.abs(pares - impares) <= 1) {
                    statusEl.textContent = '‚úÖ Estrat√©gia muito boa!';
                    statusEl.className = 'text-center p-2 rounded-lg font-bold text-sm bg-green-100 text-green-800';
                } else {
                    statusEl.textContent = '‚ö†Ô∏è Desbalanceado entre pares/√≠mpares';
                    statusEl.className = 'text-center p-2 rounded-lg font-bold text-sm bg-red-100 text-red-800';
                }
            }
        }

        function validarBotaoAdicionar() {
            const btn = document.getElementById('adicionarJogo');
            const quantidadeNecessariaNum = parseInt(document.getElementById('quantidadeNumeros').value);
            btn.disabled = numerosDropArea.length !== quantidadeNecessariaNum || timeDropArea === null;
        }

        function limparSelecao() {
            numerosDropArea = [];
            timeDropArea = null;
            document.querySelectorAll('.numero-time, .time-coracao').forEach(btn => {
                btn.classList.remove('selecionado');
            });
            atualizarVisualizacaoDropAreas();
            atualizarContadorParesImpares();
            validarBotaoAdicionar();
        }

        function randomizarJogo() {
            limparSelecao();
            const quantidade = parseInt(document.getElementById('quantidadeNumeros').value);
            
            // Randomizar n√∫meros
            let numerosDisponiveis = Array.from({length: 80}, (_, i) => i + 1);
            if (!permitirNumerosSorteados) {
                numerosDisponiveis = numerosDisponiveis.filter(n => !numerosSorteados.has(n));
            }
            
            while (numerosDropArea.length < quantidade && numerosDisponiveis.length > 0) {
                const index = Math.floor(Math.random() * numerosDisponiveis.length);
                const numero = numerosDisponiveis.splice(index, 1)[0];
                numerosDropArea.push(numero);
                
                const btn = document.querySelector(`[data-numero="${numero}"][data-tipo="numero"]`);
                if (btn) btn.classList.add('selecionado');
            }
            
            // Randomizar time
            let timesDisponiveis = timesBrasileiros.map(t => t.id);
            if (!permitirNumerosSorteados && timeSorteado !== null) {
                timesDisponiveis = timesDisponiveis.filter(id => id !== timeSorteado);
            }
            
            if (timesDisponiveis.length > 0) {
                const timeIndex = Math.floor(Math.random() * timesDisponiveis.length);
                timeDropArea = timesDisponiveis[timeIndex];
                
                const btn = document.querySelector(`[data-time-id="${timeDropArea}"]`);
                if (btn) btn.classList.add('selecionado');
            }
            
            atualizarVisualizacaoDropAreas();
            atualizarContadorParesImpares();
            validarBotaoAdicionar();
        }

        function adicionarJogo() {
            const quantidade = parseInt(document.getElementById('quantidadeNumeros').value);
            const custo = sistemaValores.obterValor(quantidade);
            const timeInfo = timesBrasileiros.find(t => t.id === timeDropArea);
            
            const jogo = {
                id: Date.now(),
                numeros: [...numerosDropArea], // Manter ordem original de sele√ß√£o
                time: timeDropArea,
                timeNome: timeInfo.nome,
                quantidade: quantidade,
                custo: custo,
                pares: numerosDropArea.filter(n => n % 2 === 0).length,
                impares: numerosDropArea.filter(n => n % 2 !== 0).length,
                origem: 'Manual'
            };
            
            meusJogos.push(jogo);
            limparSelecao();
            atualizarVisualizacaoJogos();
            atualizarCustoTotal();
            
            showCustomAlert('‚úÖ Sucesso', 'Jogo adicionado com sucesso!\n\nLoteria do FUTEBOL!');
        }

        // ===== GERA√á√ÉO MINIMALISTA =====

        function gerarJogosMinimalistas() {
            const qtdJogos = parseInt(document.getElementById('qtdJogosMin').value);
            const numerosJogo = parseInt(document.getElementById('numerosPorJogoMin').value);
            const estrategia = document.getElementById('estrategiaMin').value;
            
            console.log('üéØ Configura√ß√£o Timemania:', {qtdJogos, numerosJogo, estrategia}); // Debug
            
            const regrasSelecionadas = [];
            document.querySelectorAll('.regra-checkbox:checked').forEach(checkbox => {
                regrasSelecionadas.push(checkbox.id);
            });
            
            if (regrasSelecionadas.length === 0) {
                showCustomAlert('‚ö†Ô∏è Nenhuma Regra', 'Selecione pelo menos uma regra minimalista!');
                return;
            }
            
            const jogosGerados = [];
            
            for (let i = 0; i < qtdJogos; i++) {
                const resultado = gerarJogoComRegrasSelecionadas(numerosJogo, estrategia, regrasSelecionadas, i);
                console.log(`üéÆ Jogo ${i+1} gerado:`, resultado); // Debug
                
                const timeInfo = timesBrasileiros.find(t => t.id === resultado.time) || timesBrasileiros[0];
                
                jogosGerados.push({
                    id: Date.now() + i,
                    numeros: resultado.numeros.slice(0, numerosJogo),
                    time: resultado.time,
                    timeNome: timeInfo.nome,
                    quantidade: numerosJogo,
                    custo: sistemaValores.obterValor(numerosJogo),
                    estrategia: estrategia,
                    regras: regrasSelecionadas.length,
                    origem: `Minimalista (${regrasSelecionadas.length} regras)`
                });
            }
            
            exibirJogosMinimalistas(jogosGerados);
        }

        function gerarJogoComRegrasSelecionadas(quantidade, estrategia, regras, indiceJogo = 0) {
            const numerosBase = [];
            let timeEscolhido = 1; // Padr√£o: Flamengo
            const data = new Date();
            
            // Obter dados do contexto
            const concurso = ultimoResultado ? ultimoResultado.numero + 1 : 2151;
            const premio = ultimoResultado ? Math.floor(ultimoResultado.valorEstimadoProximoConcurso / 10000) : 120;
            const ano = data.getFullYear();
            const mes = data.getMonth() + 1;
            const dia = data.getDate();
            
            // Adicionar varia√ß√£o baseada no √≠ndice do jogo
            const variacao = indiceJogo * 5 + Math.floor(Math.random() * 30);
            
            // ===== REGRAS ESPEC√çFICAS PARA TIMEMANIA =====
            
            // R1 - N√∫meros Diretos
            if (regras.includes('r1-direto')) {
                if (dia <= 80) numerosBase.push(dia);
                if (mes <= 80) numerosBase.push(mes);
                const concursoLimitado = concurso % 80;
                if (concursoLimitado > 0) numerosBase.push(concursoLimitado);
                const premioLimitado = premio % 80;
                if (premioLimitado > 0) numerosBase.push(premioLimitado);
            }
            
            // R2 - Soma de Componentes
            if (regras.includes('r2-soma')) {
                const soma1 = (dia + mes) % 80 || 80;
                const soma2 = (concurso % 100 + premio) % 80 || 80;
                const soma3 = (ano % 100 + dia) % 80 || 80;
                numerosBase.push(soma1, soma2, soma3);
            }
            
            // R3 - Times Populares
            if (regras.includes('r3-times')) {
                const timesPopulares = [1, 2, 3, 4]; // Flamengo, Corinthians, S√£o Paulo, Palmeiras
                timeEscolhido = timesPopulares[indiceJogo % timesPopulares.length];
                
                // Adicionar n√∫meros relacionados aos times populares
                numerosBase.push(timeEscolhido * 10, timeEscolhido * 5, timeEscolhido + 10);
            }
            
            // R4 - Futebol Hist√≥rico
            if (regras.includes('r4-historico')) {
                // Anos importantes do futebol brasileiro
                const anosHistoricos = [1958, 1962, 1970, 1994, 2002]; // Copas do Mundo ganhas pelo Brasil
                anosHistoricos.forEach(ano => {
                    const numero = ano % 80;
                    if (numero > 0) numerosBase.push(numero);
                });
                
                // Datas hist√≥ricas (s√≥ os dias)
                numerosBase.push(16, 13, 21, 17, 30); // Datas famosas do futebol
            }
            
            // R5 - N√∫meros da Sorte
            if (regras.includes('r5-sorte')) {
                const numerosSorte = [7, 10, 9, 11, 8, 23]; // Camisas famosas
                numerosBase.push(...numerosSorte);
            }
            
            // R6 - M√∫ltiplos de 10
            if (regras.includes('r6-multiplos')) {
                for (let i = 10; i <= 80; i += 10) {
                    numerosBase.push(i);
                }
            }
            
            // R7 - Extremos
            if (regras.includes('r7-extremos')) {
                // N√∫meros de 1-10
                for (let i = 1; i <= 10; i++) numerosBase.push(i);
                // N√∫meros de 71-80
                for (let i = 71; i <= 80; i++) numerosBase.push(i);
            }
            
            // R8 - Sequ√™ncias
            if (regras.includes('r8-sequencias')) {
                const inicioSeq = dia % 75; // Garantir que n√£o passe de 80
                for (let i = 0; i < 5; i++) {
                    const num = inicioSeq + i;
                    if (num >= 1 && num <= 80) numerosBase.push(num);
                }
            }
            
            // R9 - Par/√çmpar Balanceado
            if (regras.includes('r9-parimpar')) {
                // Garantir n√∫meros pares e √≠mpares
                const pares = [2, 4, 6, 8, 10, 12, 14, 16, 18, 20, 22, 24, 26, 28, 30, 32, 34, 36, 38, 40];
                const impares = [1, 3, 5, 7, 9, 11, 13, 15, 17, 19, 21, 23, 25, 27, 29, 31, 33, 35, 37, 39];
                
                numerosBase.push(...pares.slice(0, 8), ...impares.slice(0, 8));
            }
            
            // R10 - Times Regionais
            if (regras.includes('r10-regionais')) {
                const timesRegionais = [6, 7, 8, 9]; // Gr√™mio, Internacional, Cruzeiro, Atl√©tico-MG
                const timeRegional = timesRegionais[indiceJogo % timesRegionais.length];
                timeEscolhido = timeRegional;
                
                // Adicionar n√∫meros relacionados
                numerosBase.push(timeRegional * 8, timeRegional + 20, timeRegional * 3);
            }
            
            // R11 - Fibonacci
            if (regras.includes('r11-fibonacci')) {
                const fibonacci = [1, 1, 2, 3, 5, 8, 13, 21, 34, 55];
                numerosBase.push(...fibonacci);
            }
            
            // R12 - N√∫meros Primos
            if (regras.includes('r12-primos')) {
                const primos = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79];
                numerosBase.push(...primos);
            }
            
            // R13 - Quadrados Perfeitos
            if (regras.includes('r13-quadrados')) {
                const quadrados = [1, 4, 9, 16, 25, 36, 49, 64];
                numerosBase.push(...quadrados);
            }
            
            // R14 - Times Nordestinos
            if (regras.includes('r14-nordeste')) {
                const timesNordeste = [13, 14, 15, 16]; // Bahia, Sport, Fortaleza, Cear√°
                const timeNordeste = timesNordeste[indiceJogo % timesNordeste.length];
                timeEscolhido = timeNordeste;
                
                // Adicionar n√∫meros relacionados
                numerosBase.push(timeNordeste + 30, timeNordeste * 4, timeNordeste + 50);
            }
            
            // R15 - Por D√©cadas
            if (regras.includes('r15-decadas')) {
                const decada = (indiceJogo % 8) + 1; // 1-8 d√©cadas
                const inicio = (decada - 1) * 10 + 1;
                const fim = decada * 10;
                
                for (let i = inicio; i <= fim && i <= 80; i++) {
                    numerosBase.push(i);
                }
            }
            
            // R16 - Invers√£o
            if (regras.includes('r16-inversao')) {
                if (dia >= 10) {
                    const diaInvertido = parseInt(dia.toString().split('').reverse().join(''));
                    if (diaInvertido <= 80) numerosBase.push(diaInvertido);
                }
                
                // Inverter alguns n√∫meros pequenos
                [12, 13, 14, 15, 16, 17, 18, 19].forEach(num => {
                    const invertido = parseInt(num.toString().split('').reverse().join(''));
                    if (invertido <= 80) numerosBase.push(invertido);
                });
            }
            
            // Adicionar n√∫meros aleat√≥rios para garantir varia√ß√£o
            for (let i = 0; i < 10; i++) {
                const aleatorio = Math.floor(Math.random() * 80) + 1;
                numerosBase.push(aleatorio);
            }
            
            // Remover duplicatas e garantir que est√£o na faixa 1-80
            let numerosValidos = [...new Set(numerosBase)].filter(n => n >= 1 && n <= 80);
            
            // R17 - Filtros Inteligentes
            if (regras.includes('r17-filtros')) {
                // Evitar muitos n√∫meros do √∫ltimo sorteio
                if (numerosSorteados.size > 0) {
                    const numerosDoUltimoSorteio = numerosValidos.filter(n => numerosSorteados.has(n));
                    if (numerosDoUltimoSorteio.length > 3) {
                        numerosValidos = numerosValidos.filter(n => !numerosSorteados.has(n));
                        numerosValidos.push(...numerosDoUltimoSorteio.slice(0, 3));
                    }
                }
                
                // Evitar time do √∫ltimo sorteio
                if (timeSorteado !== null && timeEscolhido === timeSorteado) {
                    const timesDisponiveis = timesBrasileiros.filter(t => t.id !== timeSorteado);
                    if (timesDisponiveis.length > 0) {
                        timeEscolhido = timesDisponiveis[Math.floor(Math.random() * timesDisponiveis.length)].id;
                    }
                }
            }
            
            // Completar com n√∫meros aleat√≥rios
            const numerosDisponiveis = Array.from({length: 80}, (_, i) => i + 1)
                .filter(n => !numerosValidos.includes(n));
            
            // Embaralhar
            for (let i = numerosDisponiveis.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [numerosDisponiveis[i], numerosDisponiveis[j]] = [numerosDisponiveis[j], numerosDisponiveis[i]];
            }
            
            let numeros = [...numerosValidos];
            
            // R18 - Balanceamento por d√©cadas
            if (regras.includes('r18-balanceamento')) {
                // Aplicar estrat√©gia
                let targetPares, targetImpares;
                
                switch (estrategia) {
                    case 'equilibrada':
                        targetPares = 5;
                        targetImpares = quantidade - targetPares;
                        break;
                    case 'pares':
                        targetPares = Math.ceil(quantidade * 0.7);
                        targetImpares = quantidade - targetPares;
                        break;
                    case 'impares':
                        targetImpares = Math.ceil(quantidade * 0.7);
                        targetPares = quantidade - targetImpares;
                        break;
                    case 'extremos':
                        // Focar em extremos
                        const extremos = numerosDisponiveis.filter(n => n <= 10 || n >= 71);
                        numeros.push(...extremos.slice(0, Math.min(4, extremos.length)));
                        targetPares = Math.floor(quantidade / 2);
                        targetImpares = quantidade - targetPares;
                        break;
                    case 'multiplos':
                        // Focar em m√∫ltiplos de 10
                        const multiplos = numerosDisponiveis.filter(n => n % 10 === 0);
                        numeros.push(...multiplos.slice(0, Math.min(3, multiplos.length)));
                        targetPares = 5;
                        targetImpares = quantidade - targetPares;
                        break;
                    case 'futebol':
                        // Estrat√©gia espec√≠fica de futebol
                        numeros.push(7, 10, 9, 11); // Camisas famosas
                        timeEscolhido = [1, 2, 3, 4][Math.floor(Math.random() * 4)]; // Times populares
                        targetPares = 5;
                        targetImpares = quantidade - targetPares;
                        break;
                    default:
                        targetPares = Math.floor(Math.random() * (quantidade + 1));
                        targetImpares = quantidade - targetPares;
                }
                
                // Completar com base na estrat√©gia
                while (numeros.length < quantidade && numerosDisponiveis.length > 0) {
                    const paresAtuais = numeros.filter(n => n % 2 === 0).length;
                    const imparesAtuais = numeros.filter(n => n % 2 !== 0).length;
                    
                    let preferiaPar = paresAtuais < targetPares;
                    if (imparesAtuais >= targetImpares) preferiaPar = true;
                    if (paresAtuais >= targetPares) preferiaPar = false;
                    
                    const candidatos = numerosDisponiveis.filter(n => 
                        preferiaPar ? n % 2 === 0 : n % 2 !== 0
                    );
                    
                    if (candidatos.length === 0) {
                        const index = Math.floor(Math.random() * numerosDisponiveis.length);
                        numeros.push(numerosDisponiveis.splice(index, 1)[0]);
                    } else {
                        const index = Math.floor(Math.random() * candidatos.length);
                        const numeroEscolhido = candidatos[index];
                        numeros.push(numeroEscolhido);
                        numerosDisponiveis.splice(numerosDisponiveis.indexOf(numeroEscolhido), 1);
                    }
                }
            } else {
                // Completar aleatoriamente
                while (numeros.length < quantidade && numerosDisponiveis.length > 0) {
                    const index = Math.floor(Math.random() * numerosDisponiveis.length);
                    numeros.push(numerosDisponiveis.splice(index, 1)[0]);
                }
            }
            
            // R19 - Otimiza√ß√£o Final
            if (regras.includes('r19-otimizacao')) {
                // Garantir quantidade correta
                numeros = numeros.slice(0, quantidade);
                
                // Remover duplicatas finais
                numeros = [...new Set(numeros)];
                
                // Se ficou com menos n√∫meros, completar
                while (numeros.length < quantidade && numerosDisponiveis.length > 0) {
                    const numeroAdicional = numerosDisponiveis.splice(
                        Math.floor(Math.random() * numerosDisponiveis.length), 1
                    )[0];
                    if (numeroAdicional) numeros.push(numeroAdicional);
                }
            }
            
            return { numeros, time: timeEscolhido };
        }

        function exibirJogosMinimalistas(jogos) {
            const resultadosDiv = document.getElementById('resultadosMin');
            const listaJogos = document.getElementById('listaJogosMin');
            
            listaJogos.innerHTML = '';
            
            jogos.forEach((jogo, index) => {
                const jogoDiv = document.createElement('div');
                jogoDiv.className = 'jogo-minimalista-card';
                
                const pares = jogo.numeros.filter(n => n % 2 === 0).length;
                const impares = jogo.numeros.filter(n => n % 2 !== 0).length;
                
                jogoDiv.innerHTML = `
                    <div class="flex justify-between items-center mb-2">
                        <span class="font-bold text-purple-600 text-sm">Jogo ${index + 1}</span>
                        <div class="flex gap-1">
                            <span class="px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded">${pares}P/${impares}I</span>
                            <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded">‚öΩ${jogo.timeNome.substring(0, 8)}</span>
                            <span class="px-2 py-1 bg-orange-100 text-orange-800 text-xs rounded">${jogo.regras}R</span>
                            <span class="px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded">${formatarMoeda(jogo.custo)}</span>
                            <button onclick="editarJogoMinimalistaPorId('${jogo.id}')" class="px-2 py-1 bg-yellow-500 hover:bg-yellow-600 text-white text-xs rounded transition-all duration-200 hover:scale-105" title="Editar jogo">
                                ‚úèÔ∏è
                            </button>
                            <button onclick="excluirJogoMinimalistaPorId('${jogo.id}')" class="px-2 py-1 bg-red-500 hover:bg-red-600 text-white text-xs rounded transition-all duration-200 hover:scale-105" title="Excluir jogo">
                                üóëÔ∏è
                            </button>
                        </div>
                    </div>
                    <div class="flex flex-col gap-2 mb-2">
                        <div class="flex items-center gap-1">
                            <span class="text-xs font-bold text-yellow-600">N√∫meros:</span>
                            <div class="flex flex-wrap gap-1">
                                ${jogo.numeros.map(num => `<span class="numero-minimalista">${num.toString().padStart(2, '0')}</span>`).join('')}
                            </div>
                        </div>
                        <div class="flex items-center gap-1">
                            <span class="text-xs font-bold text-timemania-green">Time:</span>
                            <div class="flex flex-wrap gap-1">
                                <span class="time-minimalista">${jogo.timeNome}</span>
                            </div>
                        </div>
                    </div>
                    <div class="text-xs text-gray-600">
                        ${jogo.estrategia} | ${jogo.numeros.length} n√∫meros | ${jogo.regras} regras | Loteria do FUTEBOL!
                    </div>
                `;
                
                listaJogos.appendChild(jogoDiv);
            });
            
            resultadosDiv.classList.remove('hidden');
            window.jogosMinimalistasGerados = jogos;
        }

        function adicionarTodosJogosMinimalistas() {
            if (!window.jogosMinimalistasGerados || window.jogosMinimalistasGerados.length === 0) {
                showCustomAlert('‚ö†Ô∏è Sem Jogos', 'Gere alguns jogos minimalistas primeiro!');
                return;
            }
            
            window.jogosMinimalistasGerados.forEach(jogoMin => {
                const jogo = {
                    id: Date.now() + Math.random(),
                    numeros: [...jogoMin.numeros],
                    time: jogoMin.time,
                    timeNome: jogoMin.timeNome,
                    quantidade: jogoMin.quantidade,
                    custo: jogoMin.custo,
                    pares: jogoMin.numeros.filter(n => n % 2 === 0).length,
                    impares: jogoMin.numeros.filter(n => n % 2 !== 0).length,
                    origem: jogoMin.origem
                };
                meusJogos.push(jogo);
            });
            
            atualizarVisualizacaoJogos();
            atualizarCustoTotal();
            
            showCustomAlert('‚úÖ Sucesso', `${window.jogosMinimalistasGerados.length} jogo(s) adicionado(s)!\n\nLoteria do FUTEBOL!`);
        }

        // ===== VISUALIZA√á√ÉO E CONTROLES =====

        function atualizarVisualizacaoJogos() {
            const lista = document.getElementById('listaJogos');
            const ordemCrescente = document.getElementById('mostrarOrdemCrescente').checked;
            
            if (meusJogos.length === 0) {
                lista.innerHTML = '<p class="text-gray-500 text-center py-8">Nenhum jogo adicionado ainda</p>';
                return;
            }
            
            lista.innerHTML = '';
            meusJogos.forEach((jogo, index) => {
                const jogoDiv = document.createElement('div');
                jogoDiv.className = 'jogo-card';
                
                const numerosOrdenados = ordemCrescente ? 
                    [...jogo.numeros].sort((a, b) => a - b) : 
                    jogo.numeros;
                
                jogoDiv.innerHTML = `
                    <div class="flex justify-between items-center mb-2">
                        <span class="font-bold text-yellow-600">Jogo ${index + 1}</span>
                        <div class="flex gap-2">
                            <span class="px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded">${jogo.pares || 0}P/${jogo.impares || 0}I</span>
                            <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded">‚öΩ${jogo.timeNome}</span>
                            <button onclick="removerJogo(${jogo.id})" class="bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded text-xs">
                                üóëÔ∏è
                            </button>
                        </div>
                    </div>
                    <div class="flex flex-col gap-2 mb-2">
                        <div class="flex items-center gap-1">
                            <span class="text-xs font-bold text-yellow-600">N√∫meros:</span>
                            <div class="flex flex-wrap gap-1">
                                ${numerosOrdenados.map(num => 
                                    `<div class="numero-jogo">${num.toString().padStart(2, '0')}</div>`
                                ).join('')}
                            </div>
                        </div>
                        <div class="flex items-center gap-1">
                            <span class="text-xs font-bold text-timemania-green">Time:</span>
                            <div class="flex flex-wrap gap-1">
                                <div class="time-jogo">${jogo.timeNome}</div>
                            </div>
                        </div>
                    </div>
                    <div class="text-sm text-gray-600">
                        ${jogo.numeros.length} n√∫meros + time - ${formatarMoeda(jogo.custo)} - Loteria do FUTEBOL!
                        ${jogo.origem ? `<span class="text-orange-600"> | ${jogo.origem}</span>` : ''}
                    </div>
                `;
                
                lista.appendChild(jogoDiv);
            });
        }

        function removerJogo(id) {
            showCustomConfirm('Tem certeza que deseja excluir este jogo?', () => {
                meusJogos = meusJogos.filter(jogo => jogo.id !== id);
                atualizarVisualizacaoJogos();
                atualizarCustoTotal();
                showCustomAlert('‚úÖ Removido', 'Jogo exclu√≠do!');
            });
        }

        function limparTodosJogos() {
            if (meusJogos.length === 0) return;
            
            showCustomConfirm('Tem certeza que deseja remover todos os jogos?', () => {
                meusJogos = [];
                atualizarVisualizacaoJogos();
                atualizarCustoTotal();
            });
        }

        function atualizarCustoTotal() {
            const total = meusJogos.reduce((sum, jogo) => sum + jogo.custo, 0);
            document.getElementById('custoTotal').textContent = formatarMoeda(total);
            document.getElementById('totalJogos').textContent = meusJogos.length;
        }

        // ===== DOWNLOADS =====

        function downloadJogos(formato) {
            if (meusJogos.length === 0) {
                showCustomAlert('‚ö†Ô∏è Sem Jogos', 'Adicione jogos primeiro!');
                return;
            }
            
            switch (formato) {
                case 'txt': downloadTXT(); break;
                case 'html': downloadHTML(); break;
                case 'xlsx': downloadXLSX(); break;
            }
        }

        function downloadTXT() {
            let txt = '';
            meusJogos.forEach((jogo, index) => {
                const numeros = jogo.numeros.map(n => n.toString().padStart(2, '0')).join(' ');
                txt += `${numeros} | ${jogo.timeNome}`;
                if (index < meusJogos.length - 1) txt += '\n';
            });
            baixarArquivo(txt, 'timemania-jogos.txt', 'text/plain');
        }

        function downloadHTML() {
            const total = meusJogos.reduce((sum, jogo) => sum + jogo.custo, 0);
            const data = new Date().toLocaleDateString('pt-BR');
            
            let html = `<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Timemania - Meus Jogos</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .header { text-align: center; margin-bottom: 30px; color: #FFF600; background: #333; padding: 20px; }
        .jogo { margin: 10px 0; padding: 15px; border: 2px solid #FFF600; border-radius: 8px; }
        .numero { display: inline-block; width: 28px; height: 28px; background: #FFF600; color: #333; 
                 border-radius: 50%; text-align: center; line-height: 28px; margin: 2px; font-weight: bold; font-size: 11px; }
        .time { display: inline-block; background: #12923D; color: white; padding: 5px 10px;
               border-radius: 8px; margin: 2px; font-weight: bold; font-size: 12px; }
        .total { text-align: center; margin-top: 20px; font-size: 18px; font-weight: bold; color: #12923D; }
        .secao { margin: 15px 0; }
        .secao-titulo { font-weight: bold; color: #FFF600; margin-bottom: 10px; background: #333; padding: 5px; }
    </style>
</head>
<body>
    <div class="header">
        <h1>‚öΩ TIMEMANIA - MEUS JOGOS</h1>
        <p>Gerado em: ${data}</p>
        <p><strong>Loteria do FUTEBOL!</strong></p>
    </div>`;
            
            meusJogos.forEach((jogo, index) => {
                html += `
    <div class="jogo">
        <h3>Jogo ${index + 1} - ${jogo.numeros.length} n√∫meros + time - ${formatarMoeda(jogo.custo)}</h3>
        
        <div class="secao">
            <div class="secao-titulo">üìä N√∫meros:</div>
            <div>
                ${jogo.numeros.map(num => `<span class="numero">${num.toString().padStart(2, '0')}</span>`).join('')}
            </div>
        </div>
        
        <div class="secao">
            <div class="secao-titulo">‚öΩ Time do Cora√ß√£o:</div>
            <div>
                <span class="time">${jogo.timeNome}</span>
            </div>
        </div>
        
        <div style="font-size: 12px; color: #666; margin-top: 5px;">
            ${jogo.pares} pares, ${jogo.impares} √≠mpares | Time: ${jogo.timeNome}
            ${jogo.origem ? ` | Origem: ${jogo.origem}` : ''}
        </div>
    </div>`;
            });
            
            html += `
    <div class="total">
        Total: ${meusJogos.length} jogo(s) - ${formatarMoeda(total)}<br>
        <small>10 n√∫meros (1-80) + Time do Cora√ß√£o</small>
    </div>
</body>
</html>`;
            
            baixarArquivo(html, 'timemania-jogos.html', 'text/html');
        }

        function downloadXLSX() {
            const dados = [
                ['Jogo', 'N√∫meros', 'Time', 'N√∫meros (Texto)', 'Pares', '√çmpares', 'Custo', 'Origem']
            ];
            
            meusJogos.forEach((jogo, index) => {
                dados.push([
                    `Jogo ${index + 1}`,
                    jogo.numeros.length,
                    jogo.timeNome,
                    jogo.numeros.map(n => n.toString().padStart(2, '0')).join(' - '),
                    jogo.pares,
                    jogo.impares,
                    jogo.custo,
                    jogo.origem || 'Manual'
                ]);
            });
            
            const total = meusJogos.reduce((sum, jogo) => sum + jogo.custo, 0);
            dados.push(['', '', 'TOTAL:', '', '', '', total, '']);
            
            const ws = XLSX.utils.aoa_to_sheet(dados);
            const wb = XLSX.utils.book_new();
            XLSX.utils.book_append_sheet(wb, ws, 'Timemania');
            XLSX.writeFile(wb, 'timemania-jogos.xlsx');
        }

        // ===== FUN√á√ïES AUXILIARES =====

        function formatarMoeda(valor) {
            return new Intl.NumberFormat('pt-BR', {
                style: 'currency',
                currency: 'BRL'
            }).format(valor);
        }

        function baixarArquivo(conteudo, nomeArquivo, tipoMime) {
            const blob = new Blob([conteudo], { type: tipoMime });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = nomeArquivo;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }

        function showCustomAlert(titulo, mensagem) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white p-6 rounded-lg shadow-lg max-w-sm w-full mx-4">
                    <h3 class="font-bold text-yellow-600 mb-2">${titulo}</h3>
                    <p class="text-gray-700 mb-4" style="white-space: pre-line;">${mensagem}</p>
                    <div class="flex justify-end">
                        <button class="px-4 py-2 bg-blue-500 text-white hover:bg-blue-600 rounded" onclick="this.closest('.fixed').remove()">OK</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function showCustomConfirm(message, onConfirm) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            
            const modalContent = document.createElement('div');
            modalContent.className = 'bg-white p-6 rounded-lg shadow-lg max-w-sm w-full mx-4';
            
            const messageEl = document.createElement('p');
            messageEl.className = 'text-gray-700 mb-4';
            messageEl.style.whiteSpace = 'pre-line';
            messageEl.textContent = message;
            
            const buttonsDiv = document.createElement('div');
            buttonsDiv.className = 'flex justify-end space-x-3';
            
            const cancelBtn = document.createElement('button');
            cancelBtn.className = 'px-4 py-2 text-gray-600 hover:bg-gray-100 rounded';
            cancelBtn.textContent = 'Cancelar';
            cancelBtn.onclick = () => modal.remove();
            
            const confirmBtn = document.createElement('button');
            confirmBtn.className = 'px-4 py-2 bg-red-500 text-white hover:bg-red-600 rounded';
            confirmBtn.textContent = 'Confirmar';
            confirmBtn.onclick = () => {
                modal.remove();
                onConfirm();
            };
            
            buttonsDiv.appendChild(cancelBtn);
            buttonsDiv.appendChild(confirmBtn);
            modalContent.appendChild(messageEl);
            modalContent.appendChild(buttonsDiv);
            modal.appendChild(modalContent);
            document.body.appendChild(modal);
        }

        // ===== FUN√á√ïES PARA JOGOS MINIMALISTAS =====

        function editarJogoMinimalistaPorId(id) {
            if (!window.jogosMinimalistasGerados || window.jogosMinimalistasGerados.length === 0) {
                showCustomAlert('‚ö†Ô∏è Erro', 'Lista de jogos n√£o encontrada ou vazia!');
                return;
            }
            
            const jogo = window.jogosMinimalistasGerados.find(j => j.id.toString() === id.toString());
            if (!jogo) {
                showCustomAlert('‚ö†Ô∏è Erro', 'Jogo n√£o encontrado!');
                return;
            }
            
            const numerosTexto = jogo.numeros.slice(0, jogo.quantidade).map(n => n.toString().padStart(2, '0')).join(' - ');
            
            showCustomConfirm(
                `Deseja editar este jogo?\n\nN√∫meros: ${numerosTexto}\nTime: ${jogo.timeNome}\n\nOs dados ser√£o carregados na se√ß√£o manual para edi√ß√£o.`, 
                () => {
                    // Limpar sele√ß√£o atual
                    limparSelecao();
                    
                    // Definir quantidade
                    document.getElementById('quantidadeNumeros').value = jogo.quantidade;
                    atualizarVisualizacaoDropAreas();
                    
                    // Carregar n√∫meros na √°rea de drop
                    jogo.numeros.slice(0, jogo.quantidade).forEach(numero => {
                        numerosDropArea.push(numero);
                        const btn = document.querySelector(`[data-numero="${numero}"][data-tipo="numero"]`);
                        if (btn) btn.classList.add('selecionado');
                    });
                    
                    // Carregar time na √°rea de drop
                    timeDropArea = jogo.time;
                    const btn = document.querySelector(`[data-time-id="${jogo.time}"]`);
                    if (btn) btn.classList.add('selecionado');
                    
                    // Atualizar visualiza√ß√£o
                    atualizarVisualizacaoDropAreas();
                    atualizarContadorParesImpares();
                    validarBotaoAdicionar();
                    
                    // Remover jogo da lista minimalista
                    window.jogosMinimalistasGerados = window.jogosMinimalistasGerados.filter(j => j.id.toString() !== id.toString());
                    exibirJogosMinimalistas(window.jogosMinimalistasGerados);
                    
                    // Rolar para a se√ß√£o manual
                    document.querySelector('#dropZoneNumeros').scrollIntoView({ 
                        behavior: 'smooth', 
                        block: 'center' 
                    });
                    
                    showCustomAlert('‚úÖ Jogo Carregado', `${jogo.quantidade} n√∫meros + time carregados na se√ß√£o manual!\n\nVoc√™ pode edit√°-los e adicionar novamente.`);
                }
            );
        }

        function excluirJogoMinimalistaPorId(id) {
            if (!window.jogosMinimalistasGerados || window.jogosMinimalistasGerados.length === 0) {
                showCustomAlert('‚ö†Ô∏è Erro', 'Lista de jogos n√£o encontrada ou vazia!');
                return;
            }
            
            const jogo = window.jogosMinimalistasGerados.find(j => j.id.toString() === id.toString());
            if (!jogo) {
                showCustomAlert('‚ö†Ô∏è Erro', 'Jogo n√£o encontrado!');
                return;
            }
            
            const numerosTexto = jogo.numeros.slice(0, jogo.quantidade).map(n => n.toString().padStart(2, '0')).join(' - ');
            
            showCustomConfirm(
                `Tem certeza que deseja excluir este jogo?\n\nN√∫meros: ${numerosTexto}\nTime: ${jogo.timeNome}`, 
                () => {
                    // Remover jogo da lista
                    window.jogosMinimalistasGerados = window.jogosMinimalistasGerados.filter(j => j.id.toString() !== id.toString());
                    
                    // Atualizar exibi√ß√£o
                    if (window.jogosMinimalistasGerados.length === 0) {
                        document.getElementById('resultadosMin').classList.add('hidden');
                        showCustomAlert('‚úÖ Lista Vazia', 'Todos os jogos foram removidos. Gere novos jogos quando desejar!');
                    } else {
                        exibirJogosMinimalistas(window.jogosMinimalistasGerados);
                        showCustomAlert('‚úÖ Exclu√≠do', 'Jogo removido da lista!');
                    }
                }
            );
        }

        // Fun√ß√µes globais para drag and drop
        function allowDrop(ev) { ev.preventDefault(); }
        function dragEnter(ev) { ev.preventDefault(); ev.currentTarget.classList.add('drag-over'); }
        function dragLeave(ev) { if (!ev.currentTarget.contains(ev.relatedTarget)) ev.currentTarget.classList.remove('drag-over'); }
        
        function dropNumero(ev) {
            ev.preventDefault();
            ev.currentTarget.classList.remove('drag-over');
            const data = ev.dataTransfer.getData('text/plain');
            if (data.startsWith('numero:')) {
                const numero = parseInt(data.split(':')[1]);
                if (!isNaN(numero)) adicionarNumeroDropArea(numero);
            }
        }
        
        function dropTime(ev) {
            ev.preventDefault();
            ev.currentTarget.classList.remove('drag-over');
            const data = ev.dataTransfer.getData('text/plain');
            if (data.startsWith('time:')) {
                const timeId = parseInt(data.split(':')[1]);
                if (!isNaN(timeId)) {
                    // Limpar sele√ß√£o anterior de time
                    document.querySelectorAll('[data-tipo="time"]').forEach(btn => btn.classList.remove('selecionado'));
                    
                    timeDropArea = timeId;
                    const btn = document.querySelector(`[data-time-id="${timeId}"]`);
                    if (btn) btn.classList.add('selecionado');
                    
                    atualizarVisualizacaoDropAreas();
                    atualizarContadorParesImpares();
                    validarBotaoAdicionar();
                }
            }
        }
    </script>
</body>
</html>